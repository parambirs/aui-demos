@import './imports/global';

/**
 * Dropdown 2
 */

/* Functional styles - these are always applied
---------------------------------------------------------------------- */
.aui-dropdown2 {
    box-sizing: border-box;
    max-width: 300px;
    min-width: 160px;
    position: absolute;
    &[aria-hidden="true"] {
        top: -999em;
        left: -999em;
    }
    &:not([resolved]) {
        display: none;
    }
}
.aui-dropdown2 [role="menuitem"],
.aui-dropdown2 [role="menuitemcheckbox"],
.aui-dropdown2 [role="menuitemradio"],
.aui-dropdown2 [role="radio"],
.aui-dropdown2 [role="checkbox"],
.aui-dropdown2 a {
    #aui.prevent-text-selection();
    display: block;
}
.aui-dropdown2 .aui-list-truncate [role="menuitem"],
.aui-dropdown2 .aui-list-truncate [role="menuitemcheckbox"],
.aui-dropdown2 .aui-list-truncate [role="menuitemradio"],
.aui-dropdown2 .aui-list-truncate [role="radio"],
.aui-dropdown2 .aui-list-truncate [role="checkbox"],
.aui-dropdown2 .aui-list-truncate a {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Default style for Dropdown2, invoked with aui-style-default
---------------------------------------------------------------------- */
.aui-dropdown2.aui-style-default {
    background-color: @aui-dropdown2-bg-color;
    border: 1px solid @aui-dropdown2-border-color;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
    box-shadow: @aui-dropdown2-box-shadow;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);

    &.aui-layer { // To override the specific height calculations for layer.
        -webkit-height: auto; // Will be handled by JS
        height: auto; // Will be handled by JS
    }
}
.aui-dropdown2.aui-style-default ul {
    list-style: none;
    margin: 2px 0;
    padding-left: 0;
}
.aui-style-default .aui-dropdown2-section + .aui-dropdown2-section {
    border-top: 1px solid @aui-dropdown2-border-color;
}
.aui-dropdown2.aui-style-default > strong,
.aui-dropdown2.aui-style-default .aui-dropdown2-section > strong,
.aui-dropdown2-heading {
    color: #707070;
    display: block;
    font-size: 12px;
    font-weight: bold;
    padding: 7px 10px 5px;
    text-transform: uppercase;
}
.aui-dropdown2.aui-style-default strong + ul {
    margin-top: 0;
}
.aui-dropdown2.aui-style-default [role="menuitem"],
.aui-dropdown2.aui-style-default [role="menuitemcheckbox"],
.aui-dropdown2.aui-style-default [role="menuitemradio"],
.aui-dropdown2.aui-style-default [role="radio"],
.aui-dropdown2.aui-style-default [role="checkbox"],
.aui-dropdown2.aui-style-default a {
    color: @aui-text-color;
    padding: 3px 10px;
    text-decoration: none;
}

.aui-dropdown2.aui-style-default {
    [aria-disabled="true"],
    a.disabled {
        color: @aui-dropdown2-disabled-text-color;
        cursor: default;
    }
}
.aui-dropdown2.aui-style-default a:focus,
.aui-dropdown2.aui-style-default a:hover {
    text-decoration: none;
}

.aui-dropdown2.aui-style-default .aui-dropdown2-radio:not([aria-disabled="true"]),
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox:not([aria-disabled="true"]) {
    cursor: pointer;
}
.aui-dropdown2.aui-style-default .aui-icon-container,
.aui-dropdown2.aui-style-default .aui-dropdown2-radio,
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox {
    padding-left: 31px;
}

.aui-dropdown2.aui-style-default .aui-icon-container,
.aui-dropdown2.aui-style-default .aui-dropdown2-radio,
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox {
    /* position of the background or icon (both 16x16) is:
     * - 10px from the left to match the item padding
     * - 7px from the top which is calculated:
     *   - 5px for the top padding of the item
     *   - 2px is half the difference between the line-height (20) and the icon height (16) so it's vertically spaced
     */
    background-position: 10px 5px;
    background-repeat: no-repeat;
    position: relative;
}

.aui-dropdown2.aui-style-default .aui-icon-container > img,
.aui-dropdown2.aui-style-default .aui-icon-container > .aui-icon {
    border-width: 0;
    left: 10px;
    position: absolute;
    top: 5px;
}
.aui-dropdown2.aui-style-default .aui-icon-container > .aui-icon {
    display: block;
    overflow: hidden;
    text-indent: -99999px;
}


/* Checkbox items */
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox.aui-dropdown2-checked {
    /* black tick */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAARklEQVR4AWMYysCKIR6/9CeGHwwyqILMDFpI0r8YAtF1LWT4zGCNKY0AAUDhzwzpCGlsSr4xfAVL4wSxQAWB+L0nNgBBCgAIERPkFiFDsgAAAABJRU5ErkJggg==');
}
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox.aui-dropdown2-checked:hover,
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox.aui-dropdown2-checked.aui-dropdown2-active {
    /* white tick */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAASUlEQVR4AWMYwuC/1f94/NKf/v/4L4MqyPxfC0n61/9AdF0L/3/+b40pjVAQABT+/D8dIY1Nybf/X2HS2JXEAhUE4vee2ACEKQBagDbBsEzisQAAAABJRU5ErkJggg==');
}
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox.aui-dropdown2-checked.aui-dropdown2-disabled,
.aui-dropdown2.aui-style-default .aui-dropdown2-checkbox.aui-dropdown2-checked.aui-dropdown2-disabled.aui-dropdown2-active {
    /* grey tick */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAT0lEQVR4AWMYwuCU1Zl4vNKnP53+cUIGRXAV8wktJOlfJwPRdJ1eePrzaWsMaQQ4E3D6F1BJOkIam5Jvp7+iSqNbE3v6K1AaH7goNgBhCgCP+y953/+bowAAAABJRU5ErkJggg==');
}

/* Radio items */
.aui-dropdown2.aui-style-default .aui-dropdown2-radio.aui-dropdown2-checked{
    /* checked */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAALElEQVR4AWMYaoBNrV3tORC2M7BhlQdK/4fCduwKnsMVPCeogKAVhB05tAAAMmMgObCgTXMAAAAASUVORK5CYII=');
}
.aui-dropdown2.aui-style-default .aui-dropdown2-radio.aui-dropdown2-checked:hover,
.aui-dropdown2.aui-style-default .aui-dropdown2-radio.aui-dropdown2-checked.aui-dropdown2-active {
    /* checked hover/focus */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAALUlEQVR4AWMYYuA/2//2/8+BsP0/G1YFQAkYaMeu4DlcwXOCCghaQdiRQwsAAFixP1V4DeDZAAAAAElFTkSuQmCC');
}
.aui-dropdown2.aui-style-default .aui-dropdown2-radio.aui-dropdown2-checked.aui-dropdown2-disabled,
.aui-dropdown2.aui-style-default .aui-dropdown2-radio.aui-dropdown2-checked.aui-dropdown2-disabled.aui-dropdown2-active {
    /* checked disabled and checked disabled hover/focus */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAM0lEQVR4AWMYYmAV28H2A88PPD/YvooNq4KD7Qf/Q2E7VgVAvVAFB54TVEDQCsKOHFoAAO6tNjk82BlWAAAAAElFTkSuQmCC');
}

.aui-dropdown2.aui-dropdown2-tailed {
    border: 1px solid @aui-dropdown2-border-color;
    margin-top: 10px;
}

.aui-dropdown2.aui-dropdown2-tailed:before,
.aui-dropdown2.aui-dropdown2-tailed:after {
    border-color: transparent;
    border-style: outset outset solid outset;
    border-width: 8px;
    bottom: 100%;
    content: "";
    display: block;
    height: 0;
    position: absolute;
    width: 0;
}
.aui-dropdown2.aui-dropdown2-tailed:before {
    border-bottom-color: @aui-dropdown2-border-color;
    margin-bottom: 1px;
}
.aui-dropdown2.aui-dropdown2-tailed:after {
    border-bottom-color: @aui-dropdown2-bg-color;
}

/* basic in-page dropdown trigger style DEPRECATED as of 4.2 */
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1 {
    padding: 5px 8px;
    text-decoration: none;
}
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1:hover,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1:focus,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1.active,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1.aui-dropdown2-active{
    background-color: #326ca6;
    border-radius: 4px;
    color: @aui-dropdown2-trigger-active-color;
    text-decoration: none;
}
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1.active,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1.aui-dropdown2active{
    border-radius: 4px 4px 0 0;
}

.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1[aria-disabled="true"],
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1[aria-disabled="true"]:hover,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1[aria-disabled="true"]:focus,
.aui-dropdown2-trigger.aui-style-dropdown2triggerlegacy1[aria-disabled="true"]:active {
    background: inherit;
    color: #99b6d3; /* equivalent of opacity: 0.5 */
    cursor: default;
}

/* Toolbar/Toolbar2-via-buttons integration. Avoid double border: */
.aui-dropdown2.aui-style-default.aui-dropdown2-in-toolbar,
.aui-dropdown2.aui-style-default.aui-dropdown2-in-buttons {
    margin-top: -1px;
    border-top-color: @aui-dropdown2-border-color;
}

/* Header integration. */
.aui-dropdown2.aui-style-default.aui-dropdown2-in-header {
    margin-top: 1px;
}
.aui-dropdown2.aui-style-default.aui-dropdown2-in-header.aui-dropdown2-in-buttons {
    margin-top: 0;
}
.aui-dropdown2.aui-style-default.aui-dropdown2-in-header.aui-dropdown2-tailed {
    margin-top: 4px;
}

/* Arrow for sub menus */
.aui-dropdown2-sub-trigger {
    position: relative;
}

.aui-dropdown2-sub-trigger:after {
    border: 5px solid transparent;
    border-left-color: @aui-dropdown2-trigger-color;
    content: "";
    height: 0;
    margin-left: -16px;
    margin-top: -5px;
    left: 100%; /* "left" + "margin-left" required because of webkit not working properly with "right" */
    position: absolute;
    top: 50%;
    width: 0;
}

.aui-dropdown2-sub-trigger.active:after,
.aui-dropdown2-sub-trigger.aui-dropdown2-active:after {
    border-left-color: @aui-dropdown2-trigger-active-color;
}

.aui-dropdown2-sub-trigger.disabled:after,
.aui-dropdown2-sub-trigger.aui-dropdown2-disabled:after{
    border-left-color: @aui-dropdown2-trigger-disabled-color;
}

.aui-dropdown2.aui-dropdown2-sub-menu,
.aui-dropdown2.aui-dropdown2-in-header.aui-dropdown2-sub-menu {
    margin-top: -3px;
}

.aui-dropdown2.aui-style-default {
    &:hover {
        //If hovering on the dropdown, set all but the hovered item to inactive display
        .aui-dropdown2-checkbox,
        .aui-dropdown2-radio,
        a {
            background-color: @aui-dropdown2-bg-color;
            color: @aui-text-color;
        }
        .aui-dropdown2-checkbox.aui-dropdown2-disabled,
        .aui-dropdown2-radio.aui-dropdown2-disabled,
        a.aui-dropdown2-disabled {
            color: @aui-dropdown2-disabled-text-color;
        }

        .aui-dropdown2-checkbox:not(.aui-dropdown2-disabled):hover,
        .aui-dropdown2-radio:not(.aui-dropdown2-disabled):hover,
        a:not(.aui-dropdown2-disabled):hover {
            background-color: @aui-link-inverted-bg-color;
            color: @aui-link-inverted-text-color;
        }
    }
    //If not hovering on the dropdown, use the active class for display
    .active,
    .aui-dropdown2-active {
        background-color: @aui-link-inverted-bg-color;
        color: @aui-link-inverted-text-color;
        &.aui-dropdown2-disabled {
            background-color: @aui-dropdown2-disabled-hover-bg-color;
            color: @aui-dropdown2-disabled-text-color;
        }
    }
}

.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless) {
  padding-right: 23px !important; /* 8px (arrow width) + 10px (right padding) + 5px (margin between arrow and logo) */
  position: relative;
}

/* Dropdown2 button integration
---------- */
.aui-button.aui-dropdown2-trigger.active:first-child,
.aui-button.aui-dropdown2-trigger.active {
  /* square off bottom corners */
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-bottom-width: 0; /* avoid double border when the dropdown is active - increase padding to cater for this reduction */
  padding-bottom: 5px; /* increase the padding to cater for the lack of border so the button doesn't change size */
}
.aui-button-link.aui-dropdown2-trigger.active:first-child,
.aui-button-link.aui-dropdown2-trigger.active,
.aui-button-text.aui-dropdown2-trigger.active:first-child,
.aui-button-text.aui-dropdown2-trigger.active {
  border-bottom-width: 1px;
  box-shadow: none;
  padding-bottom: 5px;
}

.aui-buttons .aui-button.aui-button-subtle.aui-dropdown2-trigger.active,
.aui-button.aui-button-subtle.aui-dropdown2-trigger.active {
  border-color: @aui-button-subtle-border-color;
}
.aui-button.aui-button-subtle.aui-dropdown2-trigger:hover {
  border-color: @aui-button-subtle-dropdown2-trigger-arrow-color;
}

/* Compact Dropdown2 Trigger */
.aui-button.aui-button-compact.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless) {
  padding-right: 21px !important; /* 8px (arrow width) + 8px (right padding) + 5 (margin between arrow and logo) */
}

.aui-button.aui-button-compact.aui-dropdown2-trigger:after {
  margin-left: -16px; /*  Override the margin-left from below for to compensate for the smaller padding-right */
}

.aui-button.aui-button-compact.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after {
  top: 11px; /* position the top of the arrow in the middle - 26px (height) / 2 (halfway) - 2 (arrow height) */
}
/* adjust padding for smaller height */
.aui-button.aui-dropdown2-trigger.aui-button-compact.active:first-child:not(.aui-dropdown2-trigger-arrowless),
.aui-button.aui-dropdown2-trigger.aui-button-compact.active:not(.aui-dropdown2-trigger-arrowless) {
  padding-bottom: 3px; /* increase the padding to cater for the lack of border so the button doesn't change size */
}

/* End Compact Dropdown2 Trigger */

.aui-button.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after {
  border: 4px solid transparent;
  content: "";
  height: 0;
  left: 100%; /* "left" + "margin-left" required because of webkit not working properly with "right" */
  margin-left: -18px; /* push the arrow back inside the button */
  margin-top: -2px;
  opacity: 0.8;
  position: absolute;
  top: 50%;
  width: 0;
}
.aui-button.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after,
.aui-buttons .aui-button.aui-button-primary.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after {
  border-top-color: @aui-button-default-text-color;
}
.aui-button.aui-button-primary.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless) {
    &:after {
        border-top-color: @aui-button-primary-text-color;
    }
    &.aui-button-primary:after {
        border-top-color: @aui-color-white;
    }
}
.aui-button.aui-dropdown2-trigger:hover:after,
.aui-button.aui-dropdown2-trigger.active:after {
  opacity: 1;
}

.aui-button.aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after {
  margin-top: 0;  /* make sure no margins intefere with the positioning*/
  top: 13px;  /* position the top of the arrow in the middle - 30px (height) / 2 (halfway) - 2 (arrow height)*/
}

/* suppress old icon pattern for dropdown widget so we don't get double arrows */
.aui-button.aui-dropdown2-trigger > .icon-dropdown,
.aui-button.aui-dropdown2-trigger > .aui-icon-dropdown {
  display: none;
}

/* INPUT does not play with :after - dropdown2 does not support arrow styles for INPUT buttons */
/* We cannot position arrows on aui-button-text because we don't know what size they will be all the time */
input.aui-button.aui-dropdown2-trigger,
.aui-button.aui-button-text.aui-dropdown2-trigger {
  padding-right: 10px !important; /* someone used important now we're all doomed */
}
input.aui-button.aui-dropdown2-trigger:after,
.aui-button.aui-button-text.aui-dropdown2-trigger:after {
  display: none;
}

/* Dropdown2-only / Split Button
---------- */
.aui-buttons .aui-button.aui-dropdown2-trigger.aui-button-split-more,
.aui-buttons .aui-button.aui-dropdown2-trigger.aui-button-split-more.active {
  /* don't touch vertical padding or things jump around, jump around, jump up jump up and get down */
  padding-left: 5px;
  padding-right: 10px;
  text-align: left;
  text-indent: -9999em;
}

.aui-button.aui-button-split-main:hover + .aui-button.aui-dropdown2-trigger.aui-button-split-more,
.aui-button.aui-dropdown2-trigger.aui-button-split-more {
    &.active:hover,
    &.active,
    &:focus,
    &:hover {
        &:before {
            border-left-color: @aui-button-default-active-border-color; /* dark border for hover. */
            bottom: -1px; /* -1 to pull it out over the border */
            top: -1px; /* -1 to pull it out over the border */
        }

        &.aui-button-primary {
            &:before {
                border-left: 1px solid @aui-button-primary-dropdown2-split-color;
            }
        }
    }
}

.aui-header .aui-button-primary.aui-button-split-main:hover + .aui-button.aui-dropdown2-trigger.aui-button-split-more:before,
.aui-header .aui-button-primary.aui-dropdown2-trigger.aui-button-split-more.active:hover:before,
.aui-header .aui-button-primary.aui-dropdown2-trigger.aui-button-split-more.active:before,
.aui-header .aui-button-primary.aui-dropdown2-trigger.aui-button-split-more:hover:before,
.aui-header .aui-button-primary.aui-dropdown2-trigger.aui-button-split-more:before {
  border-color: @aui-button-primary-split-border-color;
  bottom: 0;
  top: 0;
}

/**
 * Dropdown2 triggers in header
 */
.aui-header .aui-dropdown2-trigger.active,
.aui-header a:focus,
.aui-header a:hover,
.aui-header a:active {
  background-color: @aui-header-link-active-bg-color;
}

/* Icons in Dropdown2 triggers and links in header */
.aui-header .aui-dropdown2-trigger.active .aui-icon,
.aui-header a:focus .aui-icon,
.aui-header a:hover .aui-icon,
.aui-header a:active .aui-icon {
  opacity: 1;
}

/* In case showIcon is not set to false for header dropdown triggers */
.aui-header .aui-dropdown2-trigger .aui-icon-dropdown {
  display: none;
}
/* Styling the dropdown2 triggers differently in the header to avoid inline-block spacing issues with other icons */
.aui-header .aui-dropdown2-trigger:not(.aui-dropdown2-trigger-arrowless):after {
  border: 4px solid transparent;
  border-top-color: @aui-header-link-text-color;
  content: "";
  height: 0;
  margin-left: -18px;
  margin-top: -2px;
  opacity: 0.8;
  left: 100%; /* "left" + "margin-left" required because of webkit not working properly with "right" */
  position: absolute;
  text-indent: -99999px;
  top: 50%;
  width: 0;
}
.aui-header .aui-dropdown2-trigger:hover:after,
.aui-header .aui-dropdown2-trigger.active:after {
  opacity: 1;
}
.aui-header .aui-button.aui-dropdown2-trigger:after {
  margin-top: 0;
}

/**
 * Dropdown2 web components
 */
aui-dropdown-group,
aui-section {
    display: block;
}

aui-dropdown-menu.aui-dropdown2 {
    //Selector copied from above: need this for specificity, want to keep separate from the rest of the DD2 CSS.
    .aui-dropdown2-heading, .aui-style-default .aui-dropdown2-section>strong, .aui-dropdown2.aui-style-default>strong {
        &:empty {
            display: none;
        }
    }
}

// Async dropdown
aui-dropdown-menu {
    &:not([resolved]) {
        display: none;
    }

    .aui-dropdown-loading {
        padding: 5px;

        .spinner {
            display: inline-block;
            margin: 5px;
        }
    }
}
