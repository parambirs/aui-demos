{"version":3,"sources":["js/aui/when-i-type.js"],"names":[],"mappings":"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","file":"js/aui/when-i-type.js","sourcesContent":["'use strict';\n\nimport $ from './jquery';\nimport '../jquery/jquery.hotkeys';\nimport '../jquery/jquery.moveto';\nimport * as logger from './internal/log';\nimport { popup } from './dialog';\nimport globalize from './internal/globalize';\nimport i18n from './i18n';\nimport keyCode from './key-code';\n\nvar isMac = navigator.platform.indexOf('Mac') !== -1;\nvar multiCharRegex = /^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\\d\\d?|numlock|meta)/i;\n\n/**\n * Keyboard commands with syntactic sugar.\n *\n * <strong>Usage:</strong>\n * <pre>\n * whenIType(\"gh\").or(\"gd\").goTo(\"/secure/Dashboard.jspa\");\n * whenIType(\"c\").click(\"#create_link\");\n * </pre>\n *\n * @param keys - Key combinations, modifier keys are \"+\" deliminated. e.g \"ctrl+b\"\n */\nfunction whenIType (keys) {\n    var boundKeyCombos = [];\n    var executor = $.Callbacks();\n\n    function keypressHandler(e) {\n        if (!popup.current && executor) {\n            executor.fire(e);\n        }\n    }\n\n    function defaultPreventionHandler(e) {\n        e.preventDefault();\n    }\n\n    // Bind an arbitrary set of keys by calling bindKeyCombo on each triggering key combo.\n    // A string like \"abc 123\" means (a then b then c) OR (1 then 2 then 3). abc is one key combo, 123 is another.\n    function bindKeys(keys) {\n        var keyCombos = keys && keys.split ? $.trim(keys).split(' ') : [keys];\n\n        keyCombos.forEach(function (keyCombo) {\n            bindKeyCombo(keyCombo);\n        });\n    }\n\n    function hasUnprintables(keysArr) {\n        // a bit of a heuristic, but works for everything we have. Only the unprintable characters are represented with > 1-character names.\n        var i = keysArr.length;\n        while (i--) {\n            if (keysArr[i].length > 1 && keysArr[i] !== 'space') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    // bind a single key combo to this handler\n    // A string like \"abc 123\" means (a then b then c) OR (1 then 2 then 3). abc is one key combo, 123 is another.\n    function bindKeyCombo(keyCombo) {\n        var keysArr = keyCombo instanceof Array ?\n            keyCombo :\n            keyComboArrayFromString(keyCombo.toString());\n        var eventType = hasUnprintables(keysArr) ? 'keydown' : 'keypress';\n\n        boundKeyCombos.push(keysArr);\n        $(document).bind(eventType, keysArr, keypressHandler);\n\n        // Override browser/plugins\n        $(document).bind(eventType + ' keyup', keysArr, defaultPreventionHandler);\n    }\n\n    // parse out an array of (modifier+key) presses from a single string\n    // e.g. \"12ctrl+3\" becomes [ \"1\", \"2\", \"ctrl+3\" ]\n    function keyComboArrayFromString(keyString) {\n        var keysArr = [];\n        var currModifiers = '';\n\n        while (keyString.length) {\n            var modifierMatch = keyString.match(/^(ctrl|meta|shift|alt)\\+/i);\n            var multiCharMatch = keyString.match(multiCharRegex);\n\n            if (modifierMatch) {\n                currModifiers += modifierMatch[0];\n                keyString = keyString.substring(modifierMatch[0].length);\n\n            } else if (multiCharMatch) {\n                keysArr.push(currModifiers + multiCharMatch[0]);\n                keyString = keyString.substring(multiCharMatch[0].length);\n                currModifiers = '';\n\n            } else {\n                keysArr.push(currModifiers + keyString[0]);\n                keyString = keyString.substring(1);\n                currModifiers = '';\n            }\n        }\n\n        return keysArr;\n    }\n\n    function addShortcutsToTitle(selector) {\n        var elem = $(selector);\n        var title = elem.attr('title') || '';\n        var keyCombos = boundKeyCombos.slice();\n        var shortcutInstructions = elem.data('kbShortcutAppended') || '';\n        var isFirst = !shortcutInstructions;\n        var originalTitle = isFirst? title : title.substring(0, title.length - shortcutInstructions.length);\n\n        while (keyCombos.length) {\n            shortcutInstructions = appendKeyComboInstructions(keyCombos.shift().slice(), shortcutInstructions, isFirst);\n            isFirst = false;\n        }\n\n        if (isMac) {\n            shortcutInstructions = shortcutInstructions\n                .replace(/Meta/ig, '\\u2318') //Apple cmd key\n                .replace(/Shift/ig, '\\u21E7'); //Apple Shift symbol\n        }\n\n        elem.attr('title', originalTitle + shortcutInstructions);\n        elem.data('kbShortcutAppended', shortcutInstructions);\n    }\n\n    function removeShortcutsFromTitle(selector) {\n        var elem = $(selector);\n        var shortcuts = elem.data('kbShortcutAppended');\n\n        if (!shortcuts) {\n            return;\n        }\n\n        var title = elem.attr('title');\n        elem.attr('title', title.replace(shortcuts, ''));\n        elem.removeData('kbShortcutAppended');\n    }\n\n    //\n    function appendKeyComboInstructions(keyCombo, title, isFirst) {\n        if (isFirst) {\n            title += ' (' + AJS.I18n.getText('aui.keyboard.shortcut.type.x', keyCombo.shift());\n        } else {\n            title = title.replace(/\\)$/, '');\n            title += AJS.I18n.getText('aui.keyboard.shortcut.or.x', keyCombo.shift());\n        }\n\n        keyCombo.forEach(function (key) {\n            title += ' ' + AJS.I18n.getText('aui.keyboard.shortcut.then.x', key);\n        });\n        title += ')';\n\n        return title;\n    }\n\n    bindKeys(keys);\n\n    return whenIType.makeShortcut({\n        executor: executor,\n        bindKeys: bindKeys,\n        addShortcutsToTitle: addShortcutsToTitle,\n        removeShortcutsFromTitle: removeShortcutsFromTitle,\n        keypressHandler: keypressHandler,\n        defaultPreventionHandler: defaultPreventionHandler\n    });\n}\n\nwhenIType.makeShortcut = function (options) {\n    var executor = options.executor;\n    var bindKeys = options.bindKeys;\n    var addShortcutsToTitle = options.addShortcutsToTitle;\n    var removeShortcutsFromTitle = options.removeShortcutsFromTitle;\n    var keypressHandler = options.keypressHandler;\n    var defaultPreventionHandler = options.defaultPreventionHandler;\n\n    var selectorsWithTitlesModified = [];\n\n    function makeMoveToFunction(getNewFocus) {\n        return function (selector, options) {\n            options = options || {};\n            var focusedClass = options.focusedClass || 'focused';\n            var wrapAround = options.hasOwnProperty('wrapAround') ? options.wrapAround : true;\n            var escToCancel = options.hasOwnProperty('escToCancel') ? options.escToCancel : true;\n\n            executor.add(function () {\n\n                var $items = $(selector),\n                    $focusedElem = $items.filter('.' + focusedClass),\n                    moveToOptions = $focusedElem.length === 0 ? undefined : {transition: true};\n\n                if (escToCancel) {\n                    $(document).one('keydown', function (e) {\n                        if (e.keyCode === keyCode.ESCAPE && $focusedElem) {\n                            $focusedElem.removeClass(focusedClass);\n                        }\n                    });\n                }\n\n                if ($focusedElem.length) {\n                    $focusedElem.removeClass(focusedClass);\n                }\n\n                $focusedElem = getNewFocus($focusedElem, $items, wrapAround);\n\n                if ($focusedElem && $focusedElem.length > 0) {\n                    $focusedElem.addClass(focusedClass);\n                    $focusedElem.moveTo(moveToOptions);\n                    if ($focusedElem.is('a')) {\n                        $focusedElem.focus();\n                    } else {\n                        $focusedElem.find('a:first').focus();\n                    }\n                }\n            });\n            return this;\n        };\n    }\n\n    return {\n\n        /**\n         * Scrolls to and adds <em>focused</em> class to the next item in the jQuery collection\n         *\n         * @method moveToNextItem\n         * @param selector\n         * @param options\n         * @return {Object}\n         */\n        moveToNextItem: makeMoveToFunction(function ($focusedElem, $items, wrapAround) {\n            var index;\n\n            if (wrapAround && $focusedElem.length === 0) {\n                return $items.eq(0);\n\n            } else {\n                index = $.inArray($focusedElem.get(0), $items);\n                if (index < $items.length- 1) {\n                    index = index + 1;\n                    return $items.eq(index);\n                } else if (wrapAround) {\n                    return $items.eq(0);\n                }\n            }\n\n            return $focusedElem;\n        }),\n        /**\n         * Scrolls to and adds <em>focused</em> class to the previous item in the jQuery collection\n         *\n         * @method moveToPrevItem\n         * @param selector\n         * @param focusedClass\n         * @return {Object}\n         */\n        moveToPrevItem: makeMoveToFunction(function ($focusedElem, $items, wrapAround) {\n            var index;\n            if (wrapAround && $focusedElem.length === 0) {\n                return $items.filter(':last');\n\n            } else {\n                index = $.inArray($focusedElem.get(0), $items);\n                if (index > 0) {\n                    index = index - 1;\n                    return $items.eq(index);\n                } else if (wrapAround) {\n                    return $items.filter(':last');\n                }\n            }\n\n            return $focusedElem;\n        }),\n\n        /**\n         * Clicks the element specified by the <em>selector</em> argument.\n         *\n         * @method click\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        click: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                var elem = $(selector);\n                if (elem.length > 0) {\n                    elem.click();\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Navigates to specified <em>location</em>\n         *\n         * @method goTo\n         * @param {String} location - http location\n         * @return {Object}\n         */\n        goTo: function (location) {\n            executor.add(function () {\n                window.location.href = location;\n            });\n            return this;\n        },\n\n        /**\n         * navigates browser window to link href\n         *\n         * @method followLink\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        followLink: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                var elem = $(selector)[0];\n                if (elem && {'a': true, 'link': true}[ elem.nodeName.toLowerCase() ]) {\n                    window.location.href = elem.href;\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Executes function\n         *\n         * @method execute\n         * @param {function} func\n         * @return {Object}\n         */\n        execute: function (func) {\n            var self = this;\n            executor.add(function () {\n                func.apply(self, arguments);\n            });\n            return this;\n        },\n\n        /**\n         * @deprecated This implementation is uncool. Kept around to satisfy Confluence plugin devs in the short term.\n         *\n         * Executes the javascript provided by the shortcut plugin point _immediately_.\n         *\n         * @method evaluate\n         * @param {Function} command - the function provided by the shortcut key plugin point\n         */\n        evaluate: function (command) {\n            command.call(this);\n        },\n\n        /**\n         * Scrolls to element if out of view, then clicks it.\n         *\n         * @method moveToAndClick\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        moveToAndClick: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                var elem = $(selector);\n                if (elem.length > 0) {\n                    elem.click();\n                    elem.moveTo();\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Scrolls to element if out of view, then focuses it\n         *\n         * @method moveToAndFocus\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        moveToAndFocus: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function (e) {\n                var $elem = $(selector);\n                if ($elem.length > 0) {\n                    $elem.focus();\n                    if ($elem.moveTo) {\n                        $elem.moveTo();\n                    }\n                    if ($elem.is(':input')) {\n                        e.preventDefault();\n                    }\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Binds additional keyboard controls\n         *\n         * @method or\n         * @param {String} keys - keys to bind\n         * @return {Object}\n         */\n        or: function (keys) {\n            bindKeys(keys);\n            return this;\n        },\n\n        /**\n         * Unbinds shortcut keys\n         *\n         * @method unbind\n         */\n        unbind: function () {\n            $(document)\n                .unbind('keydown keypress', keypressHandler)\n                .unbind('keydown keypress keyup', defaultPreventionHandler);\n\n            for (var i = 0, len = selectorsWithTitlesModified.length; i < len; i++) {\n                removeShortcutsFromTitle(selectorsWithTitlesModified[i]);\n            }\n            selectorsWithTitlesModified = [];\n        }\n    };\n};\n\n/**\n * Creates keyboard commands and their actions from json data. Format looks like:\n *\n * <pre>\n * [\n *   {\n *        \"keys\":[[\"g\", \"d\"]],\n *        \"context\":\"global\",\n *        \"op\":\"followLink\",\n *        \"param\":\"#home_link\"\n *    },\n *    {\n *        \"keys\":[[\"g\", \"i\"]],\n *        \"context\":\"global\",\n *        \"op\":\"followLink\",\n *        \"param\":\"#find_link\"\n *    },\n *    {\n *        \"keys\":[[\"/\"]],\n *        \"context\":\"global\",\n *        \"op\":\"moveToAndFocus\",\n *        \"param\":\"#quickSearchInput\"\n *    },\n *    {\n *        \"keys\":[[\"c\"]],\n *        \"context\":\"global\",\n *        \"op\":\"moveToAndClick\",\n *        \"param\":\"#create_link\"\n *    }\n * ]\n * </pre>\n *\n * @method fromJSON\n * @static\n * @param json\n */\nwhenIType.fromJSON = function (json, switchCtrlToMetaOnMac) {\n    var shortcuts = [];\n\n    if (json) {\n        $.each(json, function (i,item) {\n            var operation = item.op,\n                param = item.param,\n                params;\n\n            if (operation === 'execute' || operation === 'evaluate') {\n                // need to turn function string into function object\n                params = [new Function(param)];\n\n            } else if (/^\\[[^\\]\\[]*,[^\\]\\[]*\\]$/.test(param)) {\n                // pass in an array to send multiple params\n                try {\n                    params = JSON.parse(param);\n                }\n                catch (e) {\n                    logger.error('When using a parameter array, array must be in strict JSON format: ' + param);\n                }\n\n                if (!$.isArray(params)) {\n                    logger.error('Badly formatted shortcut parameter. String or JSON Array of parameters required: ' + param);\n                }\n\n            } else {\n                params = [param];\n            }\n\n            $.each(item.keys, function () {\n\n                var shortcutList = this;\n                if (switchCtrlToMetaOnMac && isMac) {\n                    shortcutList = $.map(shortcutList, function (shortcutString) {\n                        return shortcutString.replace(/ctrl/i, 'meta');\n                    });\n                }\n\n                var newShortcut = whenIType(shortcutList);\n                newShortcut[operation].apply(newShortcut, params);\n                shortcuts.push(newShortcut);\n            });\n\n        });\n    }\n\n    return shortcuts;\n};\n\n// Trigger this event on an iframe if you want its keypress events to be propagated (Events to work in iframes).\n$(document).bind('iframeAppended', function (e, iframe) {\n    $(iframe).load(function () {\n        var target = $(iframe).contents();\n\n        target.bind('keyup keydown keypress', function (e) {\n            // safari propagates keypress events from iframes\n            if ($.browser.safari && e.type === 'keypress') {\n                return;\n            }\n\n            if (!$(e.target).is(':input')) {\n                $.event.trigger(\n                    e,\n                    arguments, // Preserve original event data.\n                    document,  // Bubble this event from the iframe's document to its parent document.\n                    true       // Use the capturing phase to preserve original event.target.\n                );\n            }\n        });\n    });\n});\n\nglobalize('whenIType', whenIType);\n\nexport default whenIType;\n"],"sourceRoot":"/source/"}