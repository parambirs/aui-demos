{"version":3,"sources":["js/aui/blanket.js"],"names":[],"mappings":"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","file":"js/aui/blanket.js","sourcesContent":["'use strict';\n\nimport $ from './jquery';\nimport { getMessageLogger } from './internal/deprecation';\nimport { recomputeStyle } from './internal/animation';\nimport createElement from './create-element';\nimport globalize from './internal/globalize';\n\nvar $overflowEl;\nvar _hiddenByAui = [];\n\n/**\n * Dims the screen using a blanket div\n * @param useShim deprecated, it is calculated by dim() now\n */\nfunction dim (useShim, zIndex) {\n\n    //if we're blanketing the page it means we want to hide the whatever is under the blanket from the screen readers as well\n    function hasAriaHidden(element) {\n        return element.getAttribute('aria-hidden') ? true : false;\n    }\n\n    function isAuiLayer(element) {\n        return element.className.match(/\\baui-layer\\b/) ? true : false;\n    }\n\n    _hiddenByAui = [];\n    Array.prototype.forEach.call(document.body.children, function (element) {\n        if (!hasAriaHidden(element) && !isAuiLayer(element)) {\n            element.setAttribute('aria-hidden', 'true');\n            _hiddenByAui.push(element);\n        }\n    });\n\n    if (!$overflowEl) {\n        $overflowEl = $(document.body);\n    }\n\n    if (useShim === true) {\n        useShimDeprecationLogger();\n    }\n\n    var isBlanketShowing = (!!dim.$dim) && dim.$dim.attr('aria-hidden') === 'false';\n\n    if (!!dim.$dim) {\n        dim.$dim.remove();\n        dim.$dim = null;\n    }\n\n    dim.$dim = createElement('div').addClass('aui-blanket');\n    dim.$dim.attr('tabindex', '0'); //required, or the last element's focusout event will go to the browser\n    dim.$dim.appendTo(document.body);\n\n    if (!isBlanketShowing) {\n        //recompute after insertion and before setting aria-hidden=false to ensure we calculate a difference in\n        //computed styles\n        recomputeStyle(dim.$dim);\n        dim.cachedOverflow = $overflowEl.css('overflow');\n        $overflowEl.css('overflow', 'hidden');\n    }\n\n    dim.$dim.attr('aria-hidden', 'false');\n\n    if (zIndex) {\n        dim.$dim.css({zIndex: zIndex});\n    }\n\n    return dim.$dim;\n}\n\n/**\n * Removes semitransparent DIV\n * @see dim\n */\nfunction undim () {\n    _hiddenByAui.forEach(function (element) {\n        element.removeAttribute('aria-hidden');\n    });\n\n    if (dim.$dim) {\n        dim.$dim.attr('aria-hidden', 'true');\n\n        $overflowEl && $overflowEl.css('overflow',  dim.cachedOverflow);\n    }\n}\n\nvar useShimDeprecationLogger = getMessageLogger('useShim', {\n    extraInfo: 'useShim has no alternative as it is now calculated by dim().'\n});\n\nglobalize('dim', dim);\nglobalize('undim', undim);\n\nexport {\n    dim,\n    undim\n};\n"],"sourceRoot":"/source/"}