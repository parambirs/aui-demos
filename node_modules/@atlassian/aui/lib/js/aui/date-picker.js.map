{"version":3,"sources":["js/aui/date-picker.js"],"names":[],"mappings":"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","file":"js/aui/date-picker.js","sourcesContent":["'use strict';\n\nimport $ from './jquery';\nimport '../../js-vendor/jquery/jquery-ui/jquery.ui.datepicker';\nimport * as logger from './internal/log';\nimport globalize from './internal/globalize';\nimport InlineDialog from './inline-dialog';\nimport keyCode from './key-code';\nimport i18n from './i18n';\n\n\nvar datePickerCounter = 0;\n\nfunction DatePicker (field, options) {\n    var datePicker;\n    var initPolyfill;\n    var $field;\n    var datePickerUUID;\n    var parentPopup;\n\n    datePicker = {};\n    datePickerUUID = datePickerCounter++;\n\n    // ---------------------------------------------------------------------\n    // fix up arguments ----------------------------------------------------\n    // ---------------------------------------------------------------------\n\n    $field = $(field);\n    $field.attr('data-aui-dp-uuid', datePickerUUID);\n    options = $.extend(undefined, DatePicker.prototype.defaultOptions, options);\n\n    // ---------------------------------------------------------------------\n    // expose arguments with getters ---------------------------------------\n    // ---------------------------------------------------------------------\n\n    datePicker.getField = function () {\n        return $field;\n    };\n\n    datePicker.getOptions = function () {\n        return options;\n    };\n\n    // ---------------------------------------------------------------------\n    // exposed methods -----------------------------------------------------\n    // ---------------------------------------------------------------------\n\n    initPolyfill = function () {\n\n        var calendar;\n        var handleDatePickerFocus;\n        var handleFieldBlur;\n        var handleFieldFocus;\n        var handleFieldUpdate;\n        var initCalendar;\n        var isSuppressingShow;\n        var isTrackingDatePickerFocus;\n        var popup;\n        var popupContents;\n\n        // -----------------------------------------------------------------\n        // expose methods for controlling the popup ------------------------\n        // -----------------------------------------------------------------\n\n        datePicker.hide = function () {\n            popup.hide();\n        };\n\n        datePicker.show = function () {\n            popup.show();\n        };\n\n        datePicker.setDate = function (value) {\n            if (typeof calendar !== 'undefined') {\n                calendar.datepicker('setDate', value);\n            }\n        };\n\n        datePicker.getDate = function (value) {\n            if (typeof calendar !== 'undefined') {\n                return calendar.datepicker('getDate');\n            }\n        };\n\n        // -----------------------------------------------------------------\n        // initialise the calendar -----------------------------------------\n        // -----------------------------------------------------------------\n\n        initCalendar = function (i18nConfig) {\n\n            popupContents.off();\n            if (options.hint) {\n                var $hint = $('<div/>').addClass('aui-datepicker-hint');\n                $hint.append('<span/>').text(options.hint);\n                popupContents.append($hint);\n            }\n            calendar = $('<div/>');\n            calendar.attr('data-aui-dp-popup-uuid', datePickerUUID);\n            popupContents.append(calendar);\n\n            var config = {\n                'dateFormat': options.dateFormat,\n                'defaultDate': $field.val(),\n                'maxDate': $field.attr('max'),\n                'minDate': $field.attr('min'),\n                'nextText': '>',\n                'onSelect': function (dateText, inst) {\n                    $field.val(dateText);\n                    $field.change();\n                    datePicker.hide();\n                    isSuppressingShow = true;\n                    $field.focus();\n                    options.onSelect && options.onSelect.call(this, dateText);\n                },\n                onChangeMonthYear: function () {\n                    // defer rehresh call until current stack has cleared (after month has rendered)\n                    setTimeout(popup.refresh, 0);\n                },\n                'prevText': '<'\n            };\n\n            $.extend(config, i18nConfig);\n\n            if (options.firstDay > -1) {\n                config.firstDay = options.firstDay;\n            }\n\n            if (typeof $field.attr('step') !== 'undefined') {\n                logger.log('WARNING: The date picker polyfill currently does not support the step attribute!');\n            }\n\n            calendar.datepicker(config);\n\n            // bind additional field processing events\n            $('body').on('keydown', handleDatePickerFocus);\n            $field.on('focusout keydown', handleFieldBlur);\n            $field.on('propertychange keyup input paste', handleFieldUpdate);\n\n        };\n\n        // -----------------------------------------------------------------\n        // event handler wrappers ------------------------------------------\n        // -----------------------------------------------------------------\n\n        handleDatePickerFocus = function (event) {\n            var $eventTarget = $(event.target);\n            var isTargetInput = $eventTarget.closest(popupContents).length || $eventTarget.is($field);\n            var isTargetPopup = $eventTarget.closest('.ui-datepicker-header').length;\n\n            // Hide if we're clicking anywhere else but the input or popup OR if esc is pressed.\n            if ((!isTargetInput && !isTargetPopup) || event.keyCode === keyCode.ESCAPE) {\n                datePicker.hide();\n                return;\n            }\n\n            if ($eventTarget[0] !== $field[0]) {\n                event.preventDefault();\n            }\n        };\n\n        handleFieldBlur = function (event) {\n            // Trigger blur if event is keydown and esc OR is focusout.\n            if (!(isTrackingDatePickerFocus)) {\n                $('body').on('focus blur click mousedown', '*', handleDatePickerFocus);\n                isTrackingDatePickerFocus = true;\n            }\n        };\n\n        handleFieldFocus = function (event) {\n            if (!(isSuppressingShow)) {\n                datePicker.show();\n            } else {\n                isSuppressingShow = false;\n            }\n        };\n\n        handleFieldUpdate = function (event) {\n            var val = $(this).val();\n            // IE10/11 fire the 'input' event when internally showing and hiding\n            // the placeholder of an input. This was cancelling the inital click\n            // event and preventing the selection of the first date. The val check here\n            // is a workaround to assure we have legitimate user input that should update\n            // the calendar\n            if (val) {\n                calendar.datepicker('setDate', $field.val());\n                calendar.datepicker('option', {\n                    'maxDate': $field.attr('max'),\n                    'minDate': $field.attr('min')\n                });\n            }\n        };\n\n        // -----------------------------------------------------------------\n        // undo (almost) everything ----------------------------------------\n        // -----------------------------------------------------------------\n\n        datePicker.destroyPolyfill = function () {\n\n            // goodbye, cruel world!\n            datePicker.hide();\n\n            $field.attr('placeholder', null);\n\n            $field.off('propertychange keyup input paste', handleFieldUpdate);\n            $field.off('focus click', handleFieldFocus);\n            $field.off('focusout keydown', handleFieldBlur);\n            $('body').off('keydown', handleFieldBlur);\n\n            if (DatePicker.prototype.browserSupportsDateField) {\n                $field[0].type = 'date';\n            }\n\n            if (typeof calendar !== 'undefined') {\n                calendar.datepicker('destroy');\n            }\n\n            // TODO: figure out a way to tear down the popup (if necessary)\n\n            delete datePicker.destroyPolyfill;\n\n            delete datePicker.show;\n            delete datePicker.hide;\n\n        };\n\n        // -----------------------------------------------------------------\n        // polyfill bootstrap ----------------------------------------------\n        // -----------------------------------------------------------------\n\n        isSuppressingShow = false; // used to stop the popover from showing when focus is restored to the field after a date has been selected\n        isTrackingDatePickerFocus = false; // used to prevent multiple bindings of handleDatePickerFocus within handleFieldBlur\n\n        if (!(options.languageCode in DatePicker.prototype.localisations)) {\n            options.languageCode = '';\n        }\n        var i18nConfig = DatePicker.prototype.localisations;\n\n        var containerClass = '';\n        var width = 240;\n\n        if (i18nConfig.size === 'large') {\n            width = 325;\n            containerClass = 'aui-datepicker-dialog-large';\n        }\n        var dialogOptions = {\n            'hideCallback': function () {\n                $('body').off('focus blur click mousedown', '*', handleDatePickerFocus);\n                isTrackingDatePickerFocus = false;\n                if (parentPopup && parentPopup._datePickerPopup) {\n                    delete parentPopup._datePickerPopup;\n                }\n            },\n            'hideDelay': null,\n            'noBind': true,\n            'persistent': true,\n            'closeOthers': false,\n            'width': width\n        };\n\n        if (options.position) {\n            dialogOptions.calculatePositions = function (popup, targetPosition) {\n                // create a jQuery object from the internal\n                var vanilla = $(popup[0]);\n                return options.position.call(this, vanilla, targetPosition);\n            }\n        }\n\n        popup = InlineDialog($field, undefined, function (contents, trigger, showPopup) {\n            if (typeof calendar === 'undefined') {\n                popupContents = contents;\n                initCalendar(i18nConfig);\n            }\n            parentPopup = $(trigger).closest('.aui-inline-dialog').get(0);\n            if (parentPopup) {\n                parentPopup._datePickerPopup = popup; // AUI-2696 - hackish coupling to control inline-dialog close behaviour.\n            }\n\n            showPopup();\n        }, dialogOptions);\n\n        popup.addClass('aui-datepicker-dialog');\n        popup.addClass(containerClass);\n\n        // bind what we need to start off with\n        $field.on('focus click', handleFieldFocus); // the click is for fucking opera... Y U NO FIRE FOCUS EVENTS PROPERLY???\n\n        // give users a hint that this is a date field; note that placeholder isn't technically a valid attribute\n        // according to the spec...\n        $field.attr('placeholder', options.dateFormat);\n\n        // override the browser's default date field implementation (if applicable)\n        // since IE doesn't support date input fields, we should be fine...\n        if (options.overrideBrowserDefault && DatePicker.prototype.browserSupportsDateField) {\n            $field[0].type = 'text';\n\n            //workaround for this issue in Edge: https://connect.microsoft.com/IE/feedback/details/1603512/changing-an-input-type-to-text-does-not-set-the-value\n            var value = $field[0].getAttribute('value');    //can't use jquery to get the attribute because it doesn't work in Edge\n            if (value) {\n                $field[0].value = value;\n            }\n        }\n\n    };\n\n    datePicker.reset = function () {\n\n        if (typeof datePicker.destroyPolyfill === 'function') {\n            datePicker.destroyPolyfill();\n        }\n\n        if ((!(DatePicker.prototype.browserSupportsDateField)) || options.overrideBrowserDefault) {\n            initPolyfill();\n        }\n\n    };\n\n    // ---------------------------------------------------------------------\n    // bootstrap -----------------------------------------------------------\n    // ---------------------------------------------------------------------\n\n    datePicker.reset();\n\n    return datePicker;\n\n};\n\n// -------------------------------------------------------------------------\n// things that should be common --------------------------------------------\n// -------------------------------------------------------------------------\n\nDatePicker.prototype.browserSupportsDateField = ($('<input type=\"date\" />')[0].type === 'date');\n\nDatePicker.prototype.defaultOptions = {\n    overrideBrowserDefault: false,\n    firstDay: -1,\n    languageCode: $('html').attr('lang') || 'en-AU',\n    dateFormat: $.datepicker.W3C // same as $.datepicker.ISO_8601\n};\n\n// adapted from the jQuery UI Datepicker widget (v1.8.16), with the following changes:\n//   - dayNamesShort -> dayNamesMin\n//   - unnecessary attributes omitted\n/*\nCODE to extract codes out:\n\nvar langCode, langs, out;\nlangs = jQuery.datepicker.regional;\nout = {};\n\nfor (langCode in langs) {\n    if (langs.hasOwnProperty(langCode)) {\n        out[langCode] = {\n            'dayNames': langs[langCode].dayNames,\n            'dayNamesMin': langs[langCode].dayNamesShort, // this is deliberate\n            'firstDay': langs[langCode].firstDay,\n            'isRTL': langs[langCode].isRTL,\n            'monthNames': langs[langCode].monthNames,\n            'showMonthAfterYear': langs[langCode].showMonthAfterYear,\n            'yearSuffix': langs[langCode].yearSuffix\n        };\n    }\n}\n\n */\n\nDatePicker.prototype.localisations = {\n    \"dayNames\": [i18n.getText('ajs.datepicker.localisations.day-names.sunday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.monday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.tuesday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.wednesday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.thursday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.friday'),\n        i18n.getText('ajs.datepicker.localisations.day-names.saturday')],\n    \"dayNamesMin\": [i18n.getText('ajs.datepicker.localisations.day-names-min.sunday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.monday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.tuesday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.wednesday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.thursday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.friday'),\n        i18n.getText('ajs.datepicker.localisations.day-names-min.saturday')],\n    \"firstDay\": i18n.getText('ajs.datepicker.localisations.first-day'),\n    \"isRTL\": i18n.getText('ajs.datepicker.localisations.is-RTL') === \"true\" ? true : false,\n    \"monthNames\": [i18n.getText('ajs.datepicker.localisations.month-names.january'),\n        i18n.getText('ajs.datepicker.localisations.month-names.february'),\n        i18n.getText('ajs.datepicker.localisations.month-names.march'),\n        i18n.getText('ajs.datepicker.localisations.month-names.april'),\n        i18n.getText('ajs.datepicker.localisations.month-names.may'),\n        i18n.getText('ajs.datepicker.localisations.month-names.june'),\n        i18n.getText('ajs.datepicker.localisations.month-names.july'),\n        i18n.getText('ajs.datepicker.localisations.month-names.august'),\n        i18n.getText('ajs.datepicker.localisations.month-names.september'),\n        i18n.getText('ajs.datepicker.localisations.month-names.october'),\n        i18n.getText('ajs.datepicker.localisations.month-names.november'),\n        i18n.getText('ajs.datepicker.localisations.month-names.december')],\n    \"showMonthAfterYear\": i18n.getText('ajs.datepicker.localisations.show-month-after-year') === \"true\" ? true : false,\n    \"yearSuffix\": i18n.getText('ajs.datepicker.localisations.year-suffix')\n}\n\n\n// -------------------------------------------------------------------------\n// finally, integrate with jQuery for convenience --------------------------\n// -------------------------------------------------------------------------\n\n$.fn.datePicker = function (options) {\n    return new DatePicker(this, options);\n};\n\nglobalize('DatePicker', DatePicker);\n\nexport default DatePicker;\n"],"sourceRoot":"/source/"}