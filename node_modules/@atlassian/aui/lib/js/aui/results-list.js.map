{"version":3,"sources":["js/aui/results-list.js"],"names":[],"mappings":"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","file":"js/aui/results-list.js","sourcesContent":["'use strict';\n\nimport _ from './underscore';\nimport Backbone from './backbone';\nimport globalize from './internal/globalize';\nimport ResultSet from './result-set';\n\nvar ResultsList = Backbone.View.extend({\n    events: {\n        'click [data-id]': 'setSelection'\n    },\n\n    initialize: function (options) {\n        if (!this.model) {\n            this.model = new ResultSet({source: options.source});\n        }\n\n        if (!(this.model instanceof ResultSet)) {\n            throw new Error('model must be set to a ResultSet');\n        }\n\n        this.model.bind('update', this.process, this);\n\n        this.render = _.wrap(this.render, function (func) {\n            this.trigger('rendering');\n            func.apply(this, arguments);\n            this.trigger('rendered');\n        });\n    },\n\n    process: function () {\n        if (!this._shouldShow(this.model.get('query'))) {\n            return;\n        }\n        this.show();\n    },\n\n    render: function () {\n        var ul = Backbone.$('<ul/>');\n        this.model.each(function (model) {\n            var li = Backbone.$('<li/>').attr('data-id', model.id).html(this.renderItem(model)).appendTo(ul);\n        }, this);\n        this.$el.html(ul);\n        return this;\n    },\n\n    renderItem: function () {\n        return;\n    },\n\n    setSelection: function (event) {\n        var id = event.target.getAttribute('data-id');\n        var selected = this.model.setActive(id);\n        this.trigger('selected', selected);\n    },\n\n    show: function () {\n        this.lastQuery = this.model.get('query');\n        this._hiddenQuery = null;\n        this.render();\n        this.$el.show();\n    },\n\n    hide: function () {\n        this.$el.hide();\n        this._hiddenQuery = this.lastQuery;\n    },\n\n    size: function () {\n        return this.model.get('length');\n    },\n\n    _shouldShow: function (query) {\n        return query === '' || !(this._hiddenQuery && this._hiddenQuery === query);\n    }\n});\n\nglobalize('ResultsList', ResultsList);\n\nexport default ResultsList;\n"],"sourceRoot":"/source/"}