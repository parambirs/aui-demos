{"version":3,"sources":["js/aui/toggle.js"],"names":[],"mappings":"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","file":"js/aui/toggle.js","sourcesContent":["'use strict';\n\nimport './spin';\nimport { setBooleanAttribute } from './internal/attributes';\nimport $ from 'jquery';\nimport enforce from './internal/enforcer';\nimport skateTemplateHtml from 'skatejs-template-html';\nimport skate from './internal/skate';\nimport { INPUT_SUFFIX } from './internal/constants';\n\nfunction getInput (element) {\n    return element._input || (element._input = element.querySelector('input'));\n}\n\nfunction removedAttributeHandler(attributeName, element) {\n    getInput(element).removeAttribute(attributeName);\n}\n\nfunction fallbackAttributeHandler(attributeName, element, change) {\n    getInput(element).setAttribute(attributeName, change.newValue);\n}\n\nfunction getAttributeHandler (attributeName) {\n    return {\n        removed: removedAttributeHandler.bind(this, attributeName),\n        fallback: fallbackAttributeHandler.bind(this, attributeName)\n    };\n}\n\nvar idAttributeHandler = {\n    removed: removedAttributeHandler.bind(this, 'id'),\n    fallback: function (element, change) {\n        getInput(element).setAttribute('id', `${change.newValue}${INPUT_SUFFIX}`);\n    }\n};\n\nvar checkedAttributeHandler = {\n    removed: function (element) {\n        removedAttributeHandler.call(this, 'checked', element);\n        getInput(element).checked = false;\n    },\n    fallback: function (element, change) {\n        fallbackAttributeHandler.call(this, 'checked', element, change);\n        getInput(element).checked = true;\n    }\n};\n\nvar labelHandler = {\n    removed: function (element) {\n        getInput(element).removeAttribute('aria-label');\n    },\n    fallback: function (element, change) {\n        getInput(element).setAttribute('aria-label', change.newValue);\n    }\n};\n\nfunction getTooltipContent() {\n    /* jshint validthis: true */\n    return this._input.checked ? this.tooltipOn : this.tooltipOff;\n}\n\nfunction clickHandler(element, e) {\n    if (!element.disabled && !element.busy && e.target !== element._input) {\n        element._input.click();\n    }\n    setBooleanAttribute(element, 'checked', getInput(element).checked);\n}\n\nfunction setDisabledForLabels(element, disabled) {\n    if (!element.id) {\n        return;\n    }\n    Array.prototype.forEach.call(document.querySelectorAll(`aui-label[for=\"${element.id}\"]`), function (el) {\n        el.disabled = disabled;\n    });\n}\n\n/**\n * Workaround to prevent pressing SPACE on busy state.\n * Preventing click event still makes the toggle flip and revert back.\n * So on CSS side, the input has \"pointer-events: none\" on busy state.\n */\nfunction bindEventsToInput(element) {\n    element._input.addEventListener('keydown', function (e) {\n        if (element.busy && e.keyCode ===  AJS.keyCode.SPACE) {\n            e.preventDefault();\n        }\n    });\n    // prevent toggle can be trigger through SPACE key on Firefox\n    if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n        element._input.addEventListener('click', function (e) {\n            if (element.busy) {\n                e.preventDefault();\n            }\n        });\n    }\n}\n\nskate('aui-toggle', {\n    template: skateTemplateHtml(\n        '<input type=\"checkbox\" class=\"aui-toggle-input\">',\n        '<span class=\"aui-toggle-view\">',\n            '<span class=\"aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success\"></span>',\n            '<span class=\"aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog\"></span>',\n        '</span>'\n    ),\n    created: function (element) {\n        element._input = getInput(element); // avoid using _input in attribute handlers\n        element._tick = element.querySelector('.aui-toggle-tick');\n        element._cross = element.querySelector('.aui-toggle-cross');\n\n        $(element).tooltip({title: getTooltipContent, gravity: 's', hoverable: false});\n        bindEventsToInput(element);\n    },\n    attached: function (element) {\n        enforce(element).attributeExists('label');\n    },\n    events: {\n        click: clickHandler\n    },\n    attributes: {\n        id: idAttributeHandler,\n        checked: checkedAttributeHandler,\n        disabled: getAttributeHandler('disabled'),\n        form: getAttributeHandler('form'),\n        name: getAttributeHandler('name'),\n        value: getAttributeHandler('value'),\n        'tooltip-on': {value: AJS.I18n.getText('aui.toggle.on')},\n        'tooltip-off': {value: AJS.I18n.getText('aui.toggle.off')},\n        label: labelHandler\n    },\n    prototype: {\n        focus: function () {\n            this._input.focus();\n            return this;\n        },\n        get checked () {\n            return this._input.checked;\n        },\n        set checked (value) {\n            // Need to explicitly set the property on the checkbox because the\n            // checkbox's property doesn't change with it's attribute after it\n            // is clicked.\n            this._input.checked = value;\n            return setBooleanAttribute(this, 'checked', value);\n        },\n        get disabled () {\n            return this._input.disabled;\n        },\n        set disabled (value) {\n            return setBooleanAttribute(this, 'disabled', value);\n        },\n        get form () {\n            return this._input.form;\n        },\n        set form (value) {  // This setter does nothing according to the HTML5 spec.\n            return this._input.form = value;\n        },\n        get name () {\n            return this._input.name;\n        },\n        set name (value) {\n            this.setAttribute('name', value);\n            return value;\n        },\n        get value () {\n            return this._input.value;\n        },\n        set value (value) {  // Setting the value of an input to null sets it to empty string.\n            this.setAttribute('value', value === null ? '' : value);\n            return value;\n        },\n        get busy () {\n            return this._input.getAttribute('aria-busy') === 'true';\n        },\n        set busy (value) {\n            setBooleanAttribute(this, 'busy', value);\n            if (value) {\n                this._input.setAttribute('aria-busy', 'true');\n                this._input.indeterminate = true;\n                if (this.checked) {\n                    $(this._input).addClass('indeterminate-checked');\n                    $(this._tick).spin({zIndex: null});\n                } else {\n                    $(this._cross).spin({zIndex: null, color: 'black'});\n                }\n            } else {\n                $(this._input).removeClass('indeterminate-checked');\n                this._input.indeterminate = false;\n                this._input.removeAttribute('aria-busy');\n                $(this._cross).spinStop();\n                $(this._tick).spinStop();\n            }\n            setDisabledForLabels(this, !!value);\n            return value;\n        }\n    }\n});\n"],"sourceRoot":"/source/"}