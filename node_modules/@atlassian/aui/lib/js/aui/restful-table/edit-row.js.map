{"version":3,"sources":["js/aui/restful-table/edit-row.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,gBAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;qBAeE,qBAAS,IAAI,CAAC,MAAM,CAAC;AAChC,eAAO,EAAE,IAAI;;;AAGb,cAAM,EAAE;AACJ,qBAAS,EAAE,QAAQ;AACnB,mBAAO,EAAE,QAAQ;AACjB,mBAAO,EAAE,mBAAmB;SAC/B;;;;;;AAMD,kBAAU,EAAE,oBAAU,OAAO,EAAE;AAC3B,gBAAI,CAAC,GAAG,GAAG,mBAAE,IAAI,CAAC,EAAE,CAAC,CAAC;;;AAGtB,gBAAI,CAAC,MAAM,sBAAS,CAAC;AACrB,gBAAI,CAAC,UAAU,0BAAa,CAAC;AAC7B,gBAAI,CAAC,QAAQ,wBAAW,CAAC;AACzB,gBAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;AAC/B,gBAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;AACvC,gBAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;;;AAGzC,gBAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,SAAS,CAAC;AAC5D,gBAAI,CAAC,cAAc,EAAE,CAAC;;AAEtB,gBAAI,OAAO,CAAC,YAAY,EAAE;AACtB,oBAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aAC5B,MAAM;AACH,oBAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;AACjC,oBAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;aACvC;;AAED,gBAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC;AACrD,gBAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,YAAY;AACtC,oBAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACxB,CAAC,CACG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,YAAY,EAAE;AAC5C,oBAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AAChB,wBAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;iBAC7B;aACJ,CAAC,CACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;AACrC,oBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aACpB,CAAC,CACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,YAAY;AAChC,oBAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC9C,oBAAI,CAAC,OAAO,EAAE,CAAC;aAClB,CAAC,CACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,YAAY;AAC1C,oBAAI,CAAC,cAAc,EAAE,CAAC;aACzB,CAAC,CACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,YAAY;AAC3C,oBAAI,CAAC,eAAe,EAAE,CAAC;aAC1B,CAAC,CAAC;SACV;;;;;;;AAOD,6BAAqB,EAAE,+BAAU,IAAI,EAAE;AACnC,gBAAI,IAAI,CAAC,SAAS,KAAK,KAAK,EAAE;AAC1B,uBAAO,mBAAE,uBAAuB,CAAC,CACxB,QAAQ,CAAC,MAAM,CAAC,CAChB,IAAI,CAAC;AACF,wBAAI,EAAE,IAAI,CAAC,IAAI;AACf,yBAAK,EAAE,IAAI,CAAC,KAAK;iBACpB,CAAC,CAAC;aACd,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE;AACnB,uBAAO,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC9C;SACJ;;;;;;AAMD,wBAAgB,EAAE,4BAAY;AAC1B,mBAAO,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,gBAAgB,CAAC;SAC3E;;;;;;;AAOD,yBAAiB,EAAE,2BAAU,CAAC,EAAE;AAC5B,gBAAI,CAAC,CAAC,OAAO,KAAK,EAAE,EAAE;AAClB,oBAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;aACpC;SACJ;;;;;;;;;AASD,eAAO,EAAE,iBAAU,CAAC,EAAE;AAClB,gBAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACjC,aAAC,CAAC,cAAc,EAAE,CAAC;AACnB,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,sBAAc,EAAE,0BAAY;AACxB,gBAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACvB,gBAAI,CAAC,WAAW,EAAE,CACb,OAAO,EAAE,CACT,cAAc,CAAC,EAAE,CAAC,CAAC;;AAExB,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,uBAAe,EAAE,2BAAY;AACzB,gBAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AACxB,gBAAI,CAAC,WAAW,EAAE,CACb,MAAM,EAAE,CACR,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEjC,mBAAO,IAAI,CAAC;SACf;;;;;;;;;AASD,cAAM,EAAE,gBAAU,CAAC,EAAE;AACjB,gBAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;AAClB,oBAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAClD;AACD,mBAAO,IAAI,CAAC;SACf;;;;;;;AAQD,gBAAQ,EAAE,oBAAY;AAClB,mBAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SACrD;;;;;;;;;AASD,aAAK,EAAE,eAAU,IAAI,EAAE;AACnB,gBAAI,MAAM,CAAC;AACX,gBAAI,MAAM,CAAC;;AAEX,gBAAI,CAAC,MAAM,EAAE,CAAC;;AAEd,gBAAI,IAAI,EAAE;AACN,sBAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;aACzD,MAAM;;AAEH,sBAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC;;AAEzD,oBAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,0BAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;iBAC/C,MAAM;AACH,0BAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC3C;aACJ;;AAED,gBAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC3C,kBAAM,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEjC,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,eAAO,EAAE,mBAAY;AACjB,gBAAI,kBAAkB,CAAC;AACvB,gBAAI,OAAO,CAAC;;;;AAIZ,gBAAI,cAAE,OAAO,CAAC,OAAO,EAAE;AACnB,uBAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;AAEnC,oBAAI,OAAO,CAAC,MAAM,EAAE;AAChB,sCAAkB,GAAG,mBAAE,8BAA8B,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,CACnF,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAC/B,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;;AAEjD,2BAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;iBAC3C;aACJ;;AAED,gBAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CACtC,IAAI,CAAC,SAAS,CAAC,CACf,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;;AAElC,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,cAAM,EAAE,kBAAY;AAChB,gBAAI,kBAAkB,CAAC;AACvB,gBAAI,OAAO,CAAC;;;;AAIZ,gBAAI,cAAE,OAAO,CAAC,OAAO,EAAE;AACnB,kCAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;AAC3D,uBAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;;AAEhE,oBAAI,OAAO,IAAI,kBAAkB,CAAC,MAAM,EAAE;AACtC,sCAAkB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;iBAC3C;aACJ;;AAED,gBAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CACzC,IAAI,CAAC,SAAS,CAAC,CACf,UAAU,CAAC,UAAU,CAAC,CAAC;;AAE5B,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,mBAAW,EAAE,uBAAY;AACrB,gBAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC3C,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,mBAAW,EAAE,uBAAY;AACrB,gBAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC9C,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,kBAAU,EAAE,sBAAY;AACpB,mBAAO,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;SACzD;;;;;;;;AAQD,uBAAe,EAAE,2BAAY;AACzB,gBAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AACnB,mBAAO,GAAG,CAAC,eAAe,GACtB,GAAG,CAAC,eAAe,EAAE,GACrB,GAAG,CAAC,SAAS,EAAE,CAAC;SACvB;;AAED,uBAAe,EAAE,yBAAU,MAAM,EAAE;AAC/B,mBAAO,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;SAC/C;;;;;;;;;AASD,cAAM,EAAE,gBAAU,YAAY,EAAE;AAC5B,gBAAI,QAAQ,GAAG,IAAI,CAAC;AACpB,gBAAI,MAAM,CAAC;;;AAGX,gBAAI,QAAQ,CAAC,aAAa,KAAK,MAAM,EAAE;AACnC,mCAAE,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,CAAC;aACpC;;AAED,gBAAI,IAAI,CAAC,YAAY,EAAE;AACnB,sBAAM,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;;AAEtD,oBAAI,CAAC,MAAM,EAAE;AACT,2BAAO,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;iBACnD;aACJ,MAAM;AACH,oBAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACnB,sBAAM,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;aACzD;;AAED,gBAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;;;;AAIzC,gBAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;AACpB,uBAAO,EAAE,mBAAY;AACjB,wBAAI,QAAQ,CAAC,YAAY,EAAE;AACvB,gCAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;qBAC3E,MAAM;AACH,gCAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;;AAEnE,gCAAQ,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;;AAE5C,gCAAQ,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAC,CAAC,CAAC;AAC1C,gCAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBAC3C;;AAED,4BAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;iBACrD;;AAED,qBAAK,EAAE,eAAU,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE;AAC/B,wBAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;AACpB,gCAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnC,gCAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBACnE;;AAED,4BAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;iBACrD;;AAED,sBAAM,EAAE,IAAI;aACf,CAAC,CAAC;;AAEH,mBAAO,IAAI,CAAC;SACf;;;;;;;;;AASD,mBAAW,EAAE,qBAAU,IAAI,EAAE,GAAG,EAAE;AAC9B,mBAAO,mBAAE,SAAS,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC1F;;;;;;;;AAQD,oBAAY,EAAE,sBAAU,MAAM,EAAE;AAC5B,gBAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,gBAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;;AAE7C,gBAAI,MAAM,EAAE;AACR,8BAAE,IAAI,CAAC,MAAM,EAAE,UAAU,IAAI,EAAE,GAAG,EAAE;AAChC,4BAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,GAAG,IAAI,CAAC,CACjC,OAAO,CAAC,IAAI,CAAC,CACb,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;iBACpD,CAAC,CAAC;aACN;;AAED,mBAAO,IAAI,CAAC;SACf;;;;;;;;AASD,cAAM,EAAE,gBAAW,UAAU,EAAE;AAC3B,gBAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,gBAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;;AAEjB,gBAAI,IAAI,CAAC,YAAY,EAAE;AACnB,mCAAE,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAC7G;;AAED,0BAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE,MAAM,EAAE;AACtC,oBAAI,QAAQ,CAAC;AACb,oBAAI,KAAK,CAAC;AACV,oBAAI,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACzC,oBAAI,IAAI,GAAG,CACH,EAAC,IAAI,EAAE,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,SAAS,EAAC,EAC5D,UAAU,CAAC,MAAM,EACjB,QAAQ,CAAC,KAAK,CACjB,CAAC;;AAEN,oBAAI,KAAK,EAAE;AACP,4BAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;iBACjD;;AAED,oBAAI,QAAQ,CAAC,WAAW,IAAI,MAAM,CAAC,UAAU,EAAE;;AAE3C,4BAAQ,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC;AAC7B,6BAAK,EAAE,QAAQ,CAAC,KAAK;qBACxB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;iBAEtB,MAAM,IAAI,MAAM,CAAC,QAAQ,EAAE;AACxB,4BAAQ,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC;AAC3B,6BAAK,EAAE,QAAQ,CAAC,KAAK;qBACxB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;iBACtB,MAAM;AACH,4BAAQ,GAAG,QAAQ,CAAC,qBAAqB,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;iBACnE;;AAED,qBAAK,GAAG,mBAAE,QAAQ,CAAC,CAAC;;AAEpB,oBAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ,CAAC,IAAI,EAAE;AAC/C,4BAAQ,CAAC,IAAI,CAAC,UAAU,QAAQ,EAAE;AAC9B,6BAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;qBAC1B,CAAC,CAAC;iBACN,MAAM;AACH,yBAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;iBAC1B;;AAED,oBAAI,MAAM,CAAC,UAAU,EAAE;AACnB,yBAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBACrC;;AAED,qBAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;aAChC,CAAC,CAAC;;AAEH,gBAAI,CAAC,GAAG,CACH,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;aACnE,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;;AAEpE,gBAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;AAC9D,gBAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;;AAE5D,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,wBAAgB,EAAE,0BAAU,MAAM,EAAE;AAChC,gBAAI,WAAW,GAAG,mBAAE,4CAA4C,CAAC,CAAC;;AAElE,gBAAI,MAAM,EAAE;AACR,2BAAW,CAAC,MAAM,CAAC,mBAAE,4CAA4C,CAAC,CAAC,IAAI,CAAC;AACpE,6BAAS,EAAE,IAAI,CAAC,eAAe;AAC/B,yBAAK,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC;iBAC9C,CAAC,CAAC,CACE,MAAM,CAAC,mBAAE,mDAAmD,CAAC,CACzD,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAChC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAC1C,IAAI,CAAC;AACF,6BAAS,EAAG,IAAI,CAAC,eAAe;iBACnC,CAAC,CAAC,CAAC;aACf,MAAM;AACH,2BAAW,CAAC,MAAM,CAAC,mBAAE,4CAA4C,CAAC,CAAC,IAAI,CAAC;AACpE,6BAAS,EAAE,IAAI,CAAC,eAAe;AAC/B,yBAAK,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;iBAC3C,CAAC,CAAC,CAAC;aACP;;AAED,mBAAO,WAAW,CAAC,GAAG,CAAC,mBAAE,wCAAwC,CAAC,CAAC,MAAM,CAAC,4BAAU,CAAC,CAAC,CAAC;SAC1F;KACJ,CAAC","file":"js/aui/restful-table/edit-row.js","sourcesContent":["'use strict';\n\nimport $ from '../jquery';\nimport '../../../js-vendor/jquery/serializetoobject';\nimport Backbone from '../backbone';\nimport classNames from './class-names';\nimport dataKeys from './data-keys';\nimport events from './events';\nimport i18n from '../i18n';\nimport throbber from './throbber';\n\n/**\n * An abstract class that gives the required behaviour for the creating and editing entries. Extend this class and pass\n * it as the {views.row} property of the options passed to RestfulTable in construction.\n */\nexport default Backbone.View.extend({\n    tagName: 'tr',\n\n    // delegate events\n    events: {\n        'focusin': '_focus',\n        'click': '_focus',\n        'keyup': '_handleKeyUpEvent'\n    },\n\n    /**\n     * @constructor\n     * @param {Object} options\n     */\n    initialize: function (options) {\n        this.$el = $(this.el);\n\n        // faster lookup\n        this._event = events;\n        this.classNames = classNames;\n        this.dataKeys = dataKeys;\n        this.columns = options.columns;\n        this.isCreateRow = options.isCreateRow;\n        this.allowReorder = options.allowReorder;\n\n        // Allow cancelling an edit with support for setting a new element.\n        this.events['click .' + this.classNames.CANCEL] = '_cancel';\n        this.delegateEvents();\n\n        if (options.isUpdateMode) {\n            this.isUpdateMode = true;\n        } else {\n            this._modelClass = options.model;\n            this.model = new this._modelClass();\n        }\n\n        this.fieldFocusSelector = options.fieldFocusSelector;\n        this.bind(this._event.CANCEL, function () {\n            this.disabled = true;\n        })\n            .bind(this._event.SAVE, function (focusUpdated) {\n                if (!this.disabled) {\n                    this.submit(focusUpdated);\n                }\n            })\n            .bind(this._event.FOCUS, function (name) {\n                this.focus(name);\n            })\n            .bind(this._event.BLUR, function () {\n                this.$el.removeClass(this.classNames.FOCUSED);\n                this.disable();\n            })\n            .bind(this._event.SUBMIT_STARTED, function () {\n                this._submitStarted();\n            })\n            .bind(this._event.SUBMIT_FINISHED, function () {\n                this._submitFinished();\n            });\n    },\n\n    /**\n     * Renders default cell contents\n     *\n     * @param data\n     */\n    defaultColumnRenderer: function (data) {\n        if (data.allowEdit !== false) {\n            return $(\"<input type='text' />\")\n                    .addClass('text')\n                    .attr({\n                        name: data.name,\n                        value: data.value\n                    });\n        } else if (data.value) {\n            return document.createTextNode(data.value);\n        }\n    },\n\n    /**\n     * Renders drag handle\n     * @return jQuery\n     */\n    renderDragHandle: function () {\n        return '<span class=\"' + this.classNames.DRAG_HANDLE + '\"></span></td>';\n    },\n\n    /**\n     * Executes cancel event if ESC is pressed\n     *\n     * @param {Event} e\n     */\n    _handleKeyUpEvent: function (e) {\n        if (e.keyCode === 27) {\n            this.trigger(this._event.CANCEL);\n        }\n    },\n\n    /**\n     * Fires cancel event\n     *\n     * @param {Event} e\n     *\n     * @return EditRow\n     */\n    _cancel: function (e) {\n        this.trigger(this._event.CANCEL);\n        e.preventDefault();\n        return this;\n    },\n\n    /**\n     * Disables events/fields and adds safe guard against double submitting\n     *\n     * @return EditRow\n     */\n    _submitStarted: function () {\n        this.submitting = true;\n        this.showLoading()\n            .disable()\n            .delegateEvents({});\n\n        return this;\n    },\n\n    /**\n     * Enables events & fields\n     *\n     * @return EditRow\n     */\n    _submitFinished: function () {\n        this.submitting = false;\n        this.hideLoading()\n            .enable()\n            .delegateEvents(this.events);\n\n        return this;\n    },\n\n    /**\n     * Handles dom focus event, by only focusing row if it isn't already\n     *\n     * @param {Event} e\n     *\n     * @return EditRow\n     */\n    _focus: function (e) {\n        if (!this.hasFocus()) {\n            this.trigger(this._event.FOCUS, e.target.name);\n        }\n        return this;\n    },\n\n\n    /**\n     * Returns true if row has focused class\n     *\n     * @return Boolean\n     */\n    hasFocus: function () {\n        return this.$el.hasClass(this.classNames.FOCUSED);\n    },\n\n    /**\n     * Focus specified field (by name or id - first argument), first field with an error or first field (DOM order)\n     *\n     * @param name\n     *\n     * @return EditRow\n     */\n    focus: function (name) {\n        var $focus;\n        var $error;\n\n        this.enable();\n\n        if (name) {\n            $focus = this.$el.find(this.fieldFocusSelector(name));\n        } else {\n\n            $error = this.$el.find(this.classNames.ERROR + ':first');\n\n            if ($error.length === 0) {\n                $focus = this.$el.find(':input:text:first');\n            } else {\n                $focus = $error.parent().find(':input');\n            }\n        }\n\n        this.$el.addClass(this.classNames.FOCUSED);\n        $focus.focus().trigger('select');\n\n        return this;\n    },\n\n    /**\n     * Disables all fields\n     *\n     * @return EditRow\n     */\n    disable: function () {\n        var $replacementSubmit;\n        var $submit;\n\n        // firefox does not allow you to submit a form if there are 2 or more submit buttons in a form, even if all but\n        // one is disabled. It also does not let you change the type=\"submit' to type=\"button\". Therfore he lies the hack.\n        if ($.browser.mozilla) {\n            $submit = this.$el.find(':submit');\n\n            if ($submit.length) {\n                $replacementSubmit = $(\"<input type='submit' class='\" + this.classNames.SUBMIT + \"' />\")\n                    .addClass($submit.attr('class'))\n                    .val($submit.val())\n                    .data(this.dataKeys.ENABLED_SUBMIT, $submit);\n\n                $submit.replaceWith($replacementSubmit);\n            }\n        }\n\n        this.$el.addClass(this.classNames.DISABLED)\n            .find(':submit')\n            .attr('disabled', 'disabled');\n\n        return this;\n    },\n\n    /**\n     * Enables all fields\n     *\n     * @return EditRow\n     */\n    enable: function () {\n        var $placeholderSubmit;\n        var $submit;\n\n        // firefox does not allow you to submit a form if there are 2 or more submit buttons in a form, even if all but\n        // one is disabled. It also does not let you change the type=\"submit' to type=\"button\". Therfore he lies the hack.\n        if ($.browser.mozilla) {\n            $placeholderSubmit = this.$el.find(this.classNames.SUBMIT);\n            $submit = $placeholderSubmit.data(this.dataKeys.ENABLED_SUBMIT);\n\n            if ($submit && $placeholderSubmit.length) {\n                $placeholderSubmit.replaceWith($submit);\n            }\n        }\n\n        this.$el.removeClass(this.classNames.DISABLED)\n            .find(':submit')\n            .removeAttr('disabled');\n\n        return this;\n    },\n\n    /**\n     * Shows loading indicator\n     *\n     * @return EditRow\n     */\n    showLoading: function () {\n        this.$el.addClass(this.classNames.LOADING);\n        return this;\n    },\n\n    /**\n     * Hides loading indicator\n     *\n     * @return EditRow\n     */\n    hideLoading: function () {\n        this.$el.removeClass(this.classNames.LOADING);\n        return this;\n    },\n\n    /**\n     * If any of the fields have changed\n     *\n     * @return {Boolean}\n     */\n    hasUpdates: function () {\n        return !!this.mapSubmitParams(this.serializeObject());\n    },\n\n    /**\n     * Serializes the view into model representation.\n     * Default implementation uses simple jQuery plugin to serialize form fields into object\n     *\n     * @return Object\n     */\n    serializeObject: function () {\n        var $el = this.$el;\n        return $el.serializeObject ?\n            $el.serializeObject() :\n            $el.serialize();\n    },\n\n    mapSubmitParams: function (params) {\n        return this.model.changedAttributes(params);\n    },\n\n    /**\n     * Handle submission of new entries and editing of old.\n     *\n     * @param {Boolean} focusUpdated - flag of whether to focus read-only view after succssful submission\n     *\n     * @return EditRow\n     */\n    submit: function (focusUpdated) {\n        var instance = this;\n        var values;\n\n        // IE doesnt like it when the focused element is removed\n        if (document.activeElement !== window) {\n            $(document.activeElement).blur();\n        }\n\n        if (this.isUpdateMode) {\n            values = this.mapSubmitParams(this.serializeObject()); // serialize form fields into JSON\n\n            if (!values) {\n                return instance.trigger(instance._event.CANCEL);\n            }\n        } else {\n            this.model.clear();\n            values = this.mapSubmitParams(this.serializeObject()); // serialize form fields into JSON\n        }\n\n        this.trigger(this._event.SUBMIT_STARTED);\n\n        /* Attempt to add to server model. If fail delegate to createView to render errors etc. Otherwise,\n         add a new model to this._models and render a row to represent it. */\n        this.model.save(values, {\n            success: function () {\n                if (instance.isUpdateMode) {\n                    instance.trigger(instance._event.UPDATED, instance.model, focusUpdated);\n                } else {\n                    instance.trigger(instance._event.CREATED, instance.model.toJSON());\n\n                    instance.model = new instance._modelClass(); // reset\n\n                    instance.render({errors: {}, values: {}}); // pulls in instance's model for create row\n                    instance.trigger(instance._event.FOCUS);\n                }\n\n                instance.trigger(instance._event.SUBMIT_FINISHED);\n            },\n\n            error: function (model, data, xhr) {\n                if (xhr.status === 400) {\n                    instance.renderErrors(data.errors);\n                    instance.trigger(instance._event.VALIDATION_ERROR, data.errors);\n                }\n\n                instance.trigger(instance._event.SUBMIT_FINISHED);\n            },\n\n            silent: true\n        });\n\n        return this;\n    },\n\n    /**\n     * Render an error message\n     *\n     * @param msg\n     *\n     * @return {jQuery}\n     */\n    renderError: function (name, msg) {\n        return $('<div />').attr('data-field', name).addClass(this.classNames.ERROR).text(msg);\n    },\n\n    /**\n     * Render and append error messages. The property name will be matched to the input name to determine which cell to\n     * append the error message to. If this does not meet your needs please extend this method.\n     *\n     * @param errors\n     */\n    renderErrors: function (errors) {\n        var instance = this;\n\n        this.$('.' + this.classNames.ERROR).remove(); // avoid duplicates\n\n        if (errors) {\n            $.each(errors, function (name, msg) {\n                instance.$el.find(\"[name='\" + name + \"']\")\n                        .closest('td')\n                        .append(instance.renderError(name, msg));\n            });\n        }\n\n        return this;\n    },\n\n\n    /**\n     * Handles rendering of row\n     *\n     * @param {Object} renderData\n     * ... {Object} vales - Values of fields\n     */\n    render: function  (renderData) {\n        var instance = this;\n\n        this.$el.empty();\n\n        if (this.allowReorder) {\n            $('<td  class=\"' + this.classNames.ORDER + '\" />').append(this.renderDragHandle()).appendTo(instance.$el);\n        }\n\n        $.each(this.columns, function (i, column) {\n            var contents;\n            var $cell;\n            var value = renderData.values[column.id];\n            var args = [\n                    {name: column.id, value: value, allowEdit: column.allowEdit},\n                    renderData.values,\n                    instance.model\n                ];\n\n            if (value) {\n                instance.$el.attr('data-' + column.id, value); // helper for webdriver testing\n            }\n\n            if (instance.isCreateRow && column.createView) {\n                // TODO AUI-1058 - The row's model should be guaranteed to be in the correct state by this point.\n                contents = new column.createView({\n                    model: instance.model\n                }).render(args[0]);\n\n            } else if (column.editView) {\n                contents = new column.editView({\n                    model: instance.model\n                }).render(args[0]);\n            } else {\n                contents = instance.defaultColumnRenderer.apply(instance, args);\n            }\n\n            $cell = $('<td />');\n\n            if (typeof contents === 'object' && contents.done) {\n                contents.done(function (contents) {\n                    $cell.append(contents);\n                });\n            } else {\n                $cell.append(contents);\n            }\n\n            if (column.styleClass) {\n                $cell.addClass(column.styleClass);\n            }\n\n            $cell.appendTo(instance.$el);\n        });\n\n        this.$el\n            .append(this.renderOperations(renderData.update, renderData.values)) // add submit/cancel buttons\n            .addClass(this.classNames.ROW + ' ' + this.classNames.EDIT_ROW);\n\n        this.trigger(this._event.RENDER, this.$el, renderData.values);\n        this.$el.trigger(this._event.CONTENT_REFRESHED, [this.$el]);\n\n        return this;\n    },\n\n    /**\n     * Gets markup for add/update and cancel buttons\n     *\n     * @param {Boolean} update\n     */\n    renderOperations: function (update) {\n        var $operations = $('<td class=\"aui-restfultable-operations\" />');\n\n        if (update) {\n            $operations.append($('<input class=\"aui-button\" type=\"submit\" />').attr({\n                accesskey: this.submitAccessKey,\n                value: AJS.I18n.getText('aui.words.update')\n            }))\n                .append($('<a class=\"aui-button aui-button-link\" href=\"#\" />')\n                    .addClass(this.classNames.CANCEL)\n                    .text(AJS.I18n.getText('aui.words.cancel'))\n                    .attr({\n                        accesskey:  this.cancelAccessKey\n                    }));\n        } else {\n            $operations.append($('<input class=\"aui-button\" type=\"submit\" />').attr({\n                accesskey: this.submitAccessKey,\n                value: AJS.I18n.getText('aui.words.add')\n            }));\n        }\n\n        return $operations.add($('<td class=\"aui-restfultable-status\" />').append(throbber()));\n    }\n});\n"],"sourceRoot":"/source/"}