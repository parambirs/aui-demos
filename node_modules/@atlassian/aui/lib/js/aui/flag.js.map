{"version":3,"sources":["js/aui/flag.js"],"names":[],"mappings":"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","file":"js/aui/flag.js","sourcesContent":["'use strict';\n\nimport $ from './jquery';\nimport { recomputeStyle } from './internal/animation';\nimport amdify from './internal/amdify';\nimport globalize from './internal/globalize';\nimport keyCode from './key-code';\nimport template from './template';\n\nvar AUTO_CLOSE_TIME = 5000;\nvar ID_FLAG_CONTAINER = 'aui-flag-container';\nvar defaultOptions = {\n    body: '',\n    close: 'manual',\n    title: '',\n    type: 'info'\n};\n\nfunction flag (options) {\n    options = $.extend({}, defaultOptions, options);\n\n    var $flag = renderFlagElement(options);\n    extendFlagElement($flag);\n\n    if (options.close === 'auto') {\n        makeCloseable($flag);\n        makeAutoClosable($flag);\n    } else if (options.close === 'manual') {\n        makeCloseable($flag);\n    }\n\n    pruneFlagContainer();\n\n    return insertFlag($flag);\n}\n\nfunction extendFlagElement ($flag) {\n    var flag = $flag[0];\n\n    flag.close = function () {\n        closeFlag($flag);\n    };\n}\n\nfunction renderFlagElement (options) {\n    var html =\n    '<div class=\"aui-flag\">' +\n    '<div class=\"aui-message aui-message-{type} {type} {closeable} shadowed\">' +\n    '<p class=\"title\">' +\n    '<strong>{title}</strong>' +\n    '</p>' +\n    '{body}<!-- .aui-message -->' +\n    '</div>' +\n    '</div>';\n    var rendered = template(html).fill({\n        'body:html': options.body || '',\n        closeable: (options.close === 'never') ? '' : 'closeable',\n        title: options.title || '',\n        type: options.type\n    }).toString();\n\n    return $(rendered);\n}\n\nfunction makeCloseable ($flag) {\n    var $icon = $('<span class=\"aui-icon icon-close\" role=\"button\" tabindex=\"0\"></span>');\n\n    $icon.click(function () {\n        closeFlag($flag);\n    });\n\n    $icon.keypress(function (e) {\n        if ((e.which === keyCode.ENTER) || (e.which === keyCode.SPACE)) {\n            closeFlag($flag);\n            e.preventDefault();\n        }\n    });\n\n    return $flag.find('.aui-message').append($icon)[0];\n}\n\nfunction makeAutoClosable ($flag) {\n    $flag.find('.aui-message').addClass('aui-will-close');\n    setTimeout(function () {\n        $flag[0].close();\n    }, AUTO_CLOSE_TIME);\n}\n\nfunction closeFlag ($flagToClose) {\n    var flag = $flagToClose.get(0);\n\n    flag.setAttribute('aria-hidden', 'true');\n    flag.dispatchEvent(new CustomEvent('aui-flag-close', {bubbles: true}));\n\n    return flag;\n}\n\nfunction pruneFlagContainer () {\n    var $container = findContainer();\n    var $allFlags = $container.find('.aui-flag');\n\n    $allFlags.get().forEach(function (flag) {\n        var isFlagAriaHidden = flag.getAttribute('aria-hidden') === 'true';\n\n        if (isFlagAriaHidden) {\n            $(flag).remove();\n        }\n    });\n}\n\nfunction findContainer () {\n    return $('#' + ID_FLAG_CONTAINER);\n}\n\nfunction insertFlag ($flag) {\n    var $flagContainer = findContainer();\n\n    if (!$flagContainer.length) {\n        $flagContainer = $('<div id=\"' + ID_FLAG_CONTAINER + '\"></div>');\n        $('body').prepend($flagContainer);\n    }\n\n    $flag.appendTo($flagContainer);\n    recomputeStyle($flag);\n\n    return $flag.attr('aria-hidden', 'false')[0];\n}\n\namdify('aui/flag', flag);\nglobalize('flag', flag);\nexport default flag;\n"],"sourceRoot":"/source/"}