{"version":3,"sources":["js/aui/result-set.js"],"names":[],"mappings":"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","file":"js/aui/result-set.js","sourcesContent":["'use strict';\n\nimport Backbone from './backbone';\nimport globalize from './internal/globalize';\n\nvar ResultSet = Backbone.Model.extend({\n    initialize: function (options) {\n        this.set('active', null, {silent: true});\n        this.collection = new Backbone.Collection();\n        this.collection.bind('reset', this.setActive, this);\n        this.source = options.source;\n        this.source.bind('respond', this.process, this);\n    },\n\n    url: false,\n\n    process: function (response) {\n        this.set('query', response.query);\n        this.collection.reset(response.results);\n        this.set('length', response.results.length);\n        this.trigger('update', this);\n    },\n\n    setActive: function () {\n        var id = (arguments[0] instanceof Backbone.Collection) ? false : arguments[0];\n        var model = (id) ? this.collection.get(id) : this.collection.first();\n        this.set('active', model || null);\n        return this.get('active');\n    },\n\n    next: function () {\n        var current = this.collection.indexOf(this.get('active'));\n        var i = (current + 1) % this.get('length');\n        var next = this.collection.at(i);\n        return this.setActive(next && next.id);\n    },\n\n    prev: function () {\n        var current = this.collection.indexOf(this.get('active'));\n        var i = ((current === 0) ? this.get('length') : current) - 1;\n        var prev = this.collection.at(i);\n        return this.setActive(prev && prev.id);\n    },\n\n    each: function () {\n        return this.collection.each.apply(this.collection, arguments);\n    }\n});\n\nglobalize('ResultSet', ResultSet);\n\nexport default ResultSet;\n"],"sourceRoot":"/source/"}