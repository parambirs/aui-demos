{"version":3,"sources":["js/aui/drop-down.js"],"names":[],"mappings":"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","file":"js/aui/drop-down.js","sourcesContent":["import $ from './jquery';\nimport '../../js-vendor/jquery/plugins/jquery.aop';\nimport * as deprecate from './internal/deprecation';\nimport * as logger from './internal/log';\nimport createElement from './create-element';\nimport globalize from './internal/globalize';\n\n/**\n * Displays a drop down, typically used for menus.\n *\n * @param obj {jQuery Object|String|Array} object to populate the drop down from.\n * @param usroptions optional dropdown configuration. Supported properties are:\n * <li>alignment - \"left\" or \"right\" alignment of the drop down</li>\n * <li>escapeHandler - function to handle on escape key presses</li>\n * <li>activeClass - class name to be added to drop down items when 'active' ie. hover over</li>\n * <li>selectionHandler - function to handle when drop down items are selected on</li>\n * <li>hideHandler - function to handle when the drop down is hidden</li>\n * When an object of type Array is passed in, you can also configure:\n * <li>isHiddenByDefault - set to true if you would like to hide the drop down on initialisation</li>\n * <li>displayHandler - function to display text in the drop down</li>\n * <li>useDisabled - If set to true, the dropdown will not appear if a class of disabled is added to aui-dd-parent</li>\n *\n * @returns {Array} an array of jQuery objects, referring to the drop down container elements\n */\nfunction dropDown (obj, usroptions) {\n    var dd = null;\n    var result = [];\n    var moving = false;\n    var $doc = $(document);\n    var options = {\n            item: 'li:has(a)',\n            activeClass: 'active',\n            alignment: 'right',\n            displayHandler: function (obj) {\n                return obj.name;\n            },\n            escapeHandler: function () {\n                this.hide('escape');\n                return false;\n            },\n            hideHandler: function () {},\n            moveHandler: function () {},\n            useDisabled: false\n        };\n\n    $.extend(options, usroptions);\n    options.alignment = {left:'left',right:'right'}[options.alignment.toLowerCase()]  || 'left';\n\n    if (obj && obj.jquery) { // if $\n        dd = obj;\n    } else if (typeof obj === 'string') { // if $ selector\n        dd = $(obj);\n    } else if (obj && obj.constructor === Array) { // if JSON\n        dd = createElement('div').addClass('aui-dropdown').toggleClass('hidden', !!options.isHiddenByDefault);\n        for (var i = 0, ii = obj.length; i < ii; i++) {\n            var ol = createElement('ol');\n            for (var j = 0, jj = obj[i].length; j < jj; j++) {\n                var li = createElement('li');\n                var properties = obj[i][j];\n                if (properties.href) {\n                    li.append(createElement('a')\n                        .html('<span>' + options.displayHandler(properties) + '</span>')\n                        .attr({href:  properties.href})\n                        .addClass(properties.className));\n\n                    // deprecated - use the properties on the li, not the span\n                    $.data($('a > span', li)[0], 'properties', properties);\n                } else {\n                    li.html(properties.html).addClass(properties.className);\n                }\n                if (properties.icon) {\n                    li.prepend(createElement('img').attr('src', properties.icon));\n                }\n                if (properties.insideSpanIcon){\n                    li.children('a').prepend(createElement('span').attr('class','icon'));\n                }\n                if (properties.iconFontClass) {\n                    li.children('a').prepend(createElement('span').addClass('aui-icon aui-icon-small aui-iconfont-' + properties.iconFontClass));\n                }\n\n                $.data(li[0], 'properties', properties);\n                ol.append(li);\n            }\n            if (i === ii - 1) {\n                ol.addClass('last');\n            }\n            dd.append(ol);\n        }\n        $('body').append(dd);\n    } else {\n        throw new Error('dropDown function was called with illegal parameter. Should be $ object, $ selector or array.');\n    }\n\n    var moveDown = function () {\n        move(+1);\n    };\n\n    var moveUp = function () {\n        move(-1);\n    };\n\n    var move = function (dir) {\n        var trigger = !moving;\n        var cdd = dropDown.current.$[0];\n        var links = dropDown.current.links;\n        var oldFocus = cdd.focused;\n\n        moving = true;\n\n        if (links.length === 0) {\n            // Nothing to move focus to. Abort.\n            return;\n        }\n\n        cdd.focused = (typeof oldFocus === 'number') ? oldFocus : -1;\n\n        if (!dropDown.current) {\n            logger.log('move - not current, aborting');\n            return true;\n        }\n\n        cdd.focused += dir;\n\n        // Resolve out of bounds values:\n        if (cdd.focused < 0) {\n            cdd.focused = links.length - 1;\n        } else if (cdd.focused >= links.length) {\n            cdd.focused = 0;\n        }\n\n        options.moveHandler($(links[cdd.focused]), dir < 0 ? 'up' : 'down');\n        if (trigger && links.length) {\n            $(links[cdd.focused]).addClass(options.activeClass);\n            moving = false;\n        } else if (!links.length) {\n            moving = false;\n        }\n    };\n\n    var moveFocus = function (e) {\n        if (!dropDown.current) {\n            return true;\n        }\n        var c = e.which,\n            cdd = dropDown.current.$[0],\n            links = dropDown.current.links;\n\n        dropDown.current.cleanActive();\n        switch (c) {\n            case 40: {\n                moveDown();\n                break;\n            }\n            case 38:{\n                moveUp();\n                break;\n            }\n            case 27:{\n                return options.escapeHandler.call(dropDown.current, e);\n            }\n            case 13:{\n                if (cdd.focused >= 0) {\n                    if (!options.selectionHandler){\n                        if ($(links[cdd.focused]).attr('nodeName') != 'a'){\n                            return $('a', links[cdd.focused]).trigger('focus');    //focus on the \"a\" within the parent item elements\n                        } else {\n                            return $(links[cdd.focused]).trigger('focus');     //focus on the \"a\"\n                        }\n                    } else {\n                        return options.selectionHandler.call(dropDown.current, e, $(links[cdd.focused]));   //call the selection handler\n                    }\n                }\n                return true;\n            }\n            default:{\n                if (links.length) {\n                    $(links[cdd.focused]).addClass(options.activeClass);\n                }\n                return true;\n            }\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n        return false;\n    };\n\n    var hider = function (e) {\n        if (!((e && e.which && (e.which == 3)) || (e && e.button && (e.button == 2)) || false)) { // right click check\n            if (dropDown.current) {\n                dropDown.current.hide('click');\n            }\n        }\n    };\n    var active = function (i) {\n        return function () {\n            if (!dropDown.current) {\n                return;\n            }\n            dropDown.current.cleanFocus();\n            this.originalClass = this.className;\n            $(this).addClass(options.activeClass);\n            dropDown.current.$[0].focused = i;\n        };\n    };\n\n    var handleClickSelection = function (e) {\n        if (e.button || e.metaKey || e.ctrlKey || e.shiftKey) {\n            return true;\n        }\n        if (dropDown.current && options.selectionHandler) {\n            options.selectionHandler.call(dropDown.current, e, $(this));\n        }\n    };\n\n    var isEventsBound = function (el) {\n        var bound = false;\n        if (el.data('events')) {\n            $.each(el.data('events'), function (i, handler) {\n                $.each(handler, function (type, handler) {\n                    if (handleClickSelection === handler) {\n                        bound = true;\n                        return false;\n                    }\n                });\n            });\n        }\n        return bound;\n    };\n\n    dd.each(function () {\n        var cdd = this, $cdd = $(this), res = {};\n        var methods = {\n            reset: function () {\n                res = $.extend(res, {\n                    $: $cdd,\n                    links: $(options.item || 'li:has(a)', cdd),\n                    cleanActive: function () {\n                        if (cdd.focused + 1 && res.links.length) {\n                            $(res.links[cdd.focused]).removeClass(options.activeClass);\n                        }\n                    },\n                    cleanFocus: function () {\n                        res.cleanActive();\n                        cdd.focused = -1;\n                    },\n                    moveDown: moveDown,\n                    moveUp: moveUp,\n                    moveFocus: moveFocus,\n                    getFocusIndex: function () {\n                        return (typeof cdd.focused == 'number') ? cdd.focused : -1;\n                    }\n                });\n                res.links.each(function (i) {\n                    var $this = $(this);\n                    if (!isEventsBound($this)) {\n                        $this.hover(active(i), res.cleanFocus);\n                        $this.click(handleClickSelection);\n                    }\n                });\n            },\n            appear: function (dir) {\n                if (dir) {\n                    $cdd.removeClass('hidden');\n                    //handle left or right alignment\n                    $cdd.addClass('aui-dropdown-' + options.alignment);\n                } else {\n                    $cdd.addClass('hidden');\n                }\n            },\n            fade: function (dir) {\n                if (dir) {\n                    $cdd.fadeIn('fast');\n                } else {\n                    $cdd.fadeOut('fast');\n                }\n            },\n            scroll: function (dir) {\n                if (dir) {\n                    $cdd.slideDown('fast');\n                } else {\n                    $cdd.slideUp('fast');\n                }\n            }\n        };\n\n        res.reset = methods.reset;\n        res.reset();\n\n        /**\n         * Uses Aspect Oriented Programming (AOP) to wrap a method around another method\n         * Allows control of the execution of the wrapped method.\n         * specified method has returned @see $.aop\n         * @method addControlProcess\n         * @param {String} methodName - Name of a public method\n         * @param {Function} callback - Function to be executed\n         * @return {Array} weaved aspect\n         */\n        res.addControlProcess = function (method, process) {\n            $.aop.around({target: this, method: method}, process);\n        };\n\n        /**\n         * Uses Aspect Oriented Programming (AOP) to insert callback <em>after</em> the\n         * specified method has returned @see $.aop\n         * @method addCallback\n         * @param {String} methodName - Name of a public method\n         * @param {Function} callback - Function to be executed\n         * @return {Array} weaved aspect\n         */\n        res.addCallback = function (method, callback) {\n            return $.aop.after({target: this, method: method}, callback);\n        };\n\n        res.show = function (method) {\n            if (options.useDisabled && this.$.closest('.aui-dd-parent').hasClass('disabled')) {\n                return\n            }\n\n            this.alignment = options.alignment;\n            hider();\n            dropDown.current = this;\n            this.method = method || this.method || 'appear';\n\n            this.timer = setTimeout(function () {\n                $doc.click(hider);\n            }, 0);\n\n            $doc.keydown(moveFocus);\n\n            if (options.firstSelected && this.links[0]) {\n                active(0).call(this.links[0]);\n            }\n\n            $(cdd.offsetParent).css({zIndex: 2000});\n            methods[this.method](true);\n\n            $(document).trigger('showLayer', ['dropdown', dropDown.current]);\n        };\n\n        res.hide = function (causer) {\n            this.method = this.method || 'appear';\n            $($cdd.get(0).offsetParent).css({zIndex: ''});\n            this.cleanFocus();\n            methods[this.method](false);\n            $doc.unbind('click', hider).unbind('keydown', moveFocus);\n            $(document).trigger('hideLayer', ['dropdown', dropDown.current]);\n            dropDown.current = null;\n            return causer;\n        };\n\n        res.addCallback('reset', function () {\n            if (options.firstSelected && this.links[0]) {\n                active(0).call(this.links[0]);\n            }\n        });\n\n        if (!dropDown.iframes) {\n            dropDown.iframes = [];\n        }\n\n        dropDown.createShims = function createShims () {\n            $('iframe').each(function (idx) {\n                var iframe = this;\n                if (!iframe.shim) {\n                    iframe.shim = $('<div />')\n                                     .addClass('shim hidden')\n                                     .appendTo('body');\n                    dropDown.iframes.push(iframe);\n                }\n            });\n            return createShims;\n        }();\n\n        res.addCallback('show', function () {\n            $(dropDown.iframes).each(function () {\n                var $this = $(this);\n\n                if ($this.is(':visible')) {\n                    var offset = $this.offset();\n                    offset.height = $this.height();\n                    offset.width = $this.width();\n                    this.shim.css({\n                       left: offset.left + 'px',\n                       top: offset.top + 'px',\n                       height: offset.height + 'px',\n                       width: offset.width + 'px'\n                   }).removeClass('hidden');\n                }\n            });\n        });\n\n        res.addCallback('hide', function () {\n            $(dropDown.iframes).each(function () {\n                this.shim.addClass('hidden');\n            });\n            options.hideHandler();\n        });\n        result.push(res);\n    });\n    return result;\n};\n\n/**\n * For the given item in the drop down get the value of the named additional property. If there is no\n * property with the specified name then null will be returned.\n *\n * @method getAdditionalPropertyValue\n * @namespace dropDown\n * @param item {Object} jQuery Object of the drop down item. An LI element is expected.\n * @param name {String} name of the property to retrieve\n */\ndropDown.getAdditionalPropertyValue = function (item, name) {\n    var el = item[0];\n    if (!el || (typeof el.tagName !== 'string') || el.tagName.toLowerCase() !== 'li') {\n        // we are moving the location of the properties and want to deprecate the attachment to the span\n        // but are unsure where and how its being called so for now we just log\n        logger.log('dropDown.getAdditionalPropertyValue : item passed in should be an LI element wrapped by jQuery');\n    }\n    var properties = $.data(el, 'properties');\n    return properties ? properties[name] : null;\n};\n\n/**\n * Only here for backwards compatibility\n * @method removeAllAdditionalProperties\n * @namespace dropDown\n * @deprecated Since 3.0\n */\ndropDown.removeAllAdditionalProperties = function (item) {\n};\n\n/**\n * Base dropdown control. Enables you to identify triggers that when clicked, display dropdown.\n *\n * @class Standard\n * @constructor\n * @namespace dropDown\n * @param {Object} usroptions\n * @return {Object\n */\ndropDown.Standard = function (usroptions) {\n\n    var res = [], dropdownParents, options = {\n        selector: '.aui-dd-parent',\n        dropDown: '.aui-dropdown',\n        trigger: '.aui-dd-trigger'\n    };\n\n    // extend defaults with user options\n    $.extend(options, usroptions);\n\n    var hookUpDropDown = function ($trigger, $parent, $dropdown, ddcontrol) {\n        // extend to control to have any additional properties/methods\n        $.extend(ddcontrol, {trigger: $trigger});\n\n        // flag it to prevent additional dd controls being applied\n        $parent.addClass('dd-allocated');\n\n        //hide dropdown if not already hidden\n        $dropdown.addClass('hidden');\n\n        //show the dropdown if isHiddenByDefault is set to false\n        if (options.isHiddenByDefault == false) {\n            ddcontrol.show();\n        }\n\n        ddcontrol.addCallback('show', function () {\n            $parent.addClass('active');\n        });\n\n        ddcontrol.addCallback('hide', function () {\n            $parent.removeClass('active');\n        });\n    };\n\n    var handleEvent = function (event, $trigger, $dropdown, ddcontrol) {\n        if (ddcontrol != dropDown.current) {\n            $dropdown.css({top: $trigger.outerHeight()});\n            ddcontrol.show();\n            event.stopImmediatePropagation();\n        }\n        event.preventDefault();\n    };\n\n    if (options.useLiveEvents) {\n        // cache arrays so that we don't have to recalculate the dropdowns. Since we can't store objects as keys in a map,\n        // we have two arrays: keysCache stores keys of dropdown triggers; valuesCache stores a map of internally used objects\n        var keysCache = [];\n        var valuesCache = [];\n\n        $(options.trigger).live('click', function (event) {\n            var $trigger = $(this);\n            var $parent, $dropdown, ddcontrol;\n\n            // if we're cached, don't recalculate the dropdown and do all that funny shite.\n            var index;\n            if ((index = $.inArray(this, keysCache)) >= 0) {\n                var val = valuesCache[index];\n                $parent = val['parent'];\n                $dropdown = val['dropdown'];\n                ddcontrol = val['ddcontrol'];\n            } else {\n                $parent = $trigger.closest(options.selector);\n                $dropdown = $parent.find(options.dropDown);\n                // Sanity checking\n                if ($dropdown.length === 0) {\n                    return;\n                }\n\n                ddcontrol =  dropDown($dropdown, options)[0];\n                // Sanity checking\n                if (!ddcontrol) {\n                    return;\n                }\n\n                // cache\n                keysCache.push(this);\n                val = {\n                    parent: $parent,\n                    dropdown: $dropdown,\n                    ddcontrol: ddcontrol\n                };\n\n                hookUpDropDown($trigger, $parent, $dropdown, ddcontrol);\n\n                valuesCache.push(val);\n            }\n\n            handleEvent(event, $trigger, $dropdown, ddcontrol);\n        });\n    } else {\n        // handling for jQuery collections\n        if (this instanceof $) {\n            dropdownParents = this;\n        // handling for selectors\n        } else {\n            dropdownParents = $(options.selector);\n        }\n\n        // a series of checks to ensure we are dealing with valid dropdowns\n        dropdownParents = dropdownParents\n                .not('.dd-allocated')\n                .filter(':has(' + options.dropDown + ')')\n                .filter(':has(' + options.trigger + ')');\n\n        dropdownParents.each(function () {\n            var\n            $parent = $(this),\n            $dropdown = $(options.dropDown, this),\n            $trigger = $(options.trigger, this),\n            ddcontrol = dropDown($dropdown, options)[0];\n\n            // extend to control to have any additional properties/methods\n            $.extend(ddcontrol, {trigger: $trigger});\n\n            hookUpDropDown($trigger, $parent, $dropdown, ddcontrol);\n\n            $trigger.click(function (e) {\n                handleEvent(e, $trigger, $dropdown, ddcontrol);\n            });\n\n            // add control to the response\n            res.push(ddcontrol);\n\n        });\n    }\n    return res;\n};\n\n\n/**\n * A NewStandard dropdown, however, with the ability to populate its content's via ajax.\n *\n * @class Ajax\n * @constructor\n * @namespace dropDown\n * @param {Object} options\n * @return {Object} dropDown instance\n */\ndropDown.Ajax = function (usroptions) {\n\n    var dropdowns, options = {cache: true};\n\n    // extend defaults with user options\n    $.extend(options, usroptions || {});\n\n    // we call with \"this\" in case we are called in the context of a jQuery collection\n    dropdowns = dropDown.Standard.call(this, options);\n\n    $(dropdowns).each(function () {\n\n        var ddcontrol = this;\n\n        $.extend(ddcontrol, {\n            getAjaxOptions: function (opts) {\n                var success = function (response) {\n                    if (options.formatResults) {\n                        response = options.formatResults(response);\n                    }\n                    if (options.cache) {\n                        ddcontrol.cache.set(ddcontrol.getAjaxOptions(), response);\n                    }\n                    ddcontrol.refreshSuccess(response);\n                };\n                if (options.ajaxOptions) {\n\n\n                    if ($.isFunction(options.ajaxOptions)) {\n                        return $.extend(options.ajaxOptions.call(ddcontrol), {success: success});\n                    } else {\n                        return $.extend(options.ajaxOptions, {success: success});\n                    }\n                }\n                return $.extend(opts, {success: success});\n            },\n\n            refreshSuccess: function (response) {\n                this.$.html(response);\n            },\n\n            cache: function () {\n                var c = {};\n                return {\n                    get: function (ajaxOptions) {\n                        var data = ajaxOptions.data || '';\n                        return c[(ajaxOptions.url + data).replace(/[\\?\\&]/gi,'')];\n                    },\n                    set: function (ajaxOptions, responseData) {\n                        var data = ajaxOptions.data || '';\n                        c[(ajaxOptions.url + data).replace(/[\\?\\&]/gi,'')] = responseData;\n                    },\n                    reset: function () {\n                        c = {};\n                    }\n                };\n            }(),\n\n            show: function (superMethod) {\n                return function () {\n                    if (options.cache && !!ddcontrol.cache.get(ddcontrol.getAjaxOptions())) {\n                        ddcontrol.refreshSuccess(ddcontrol.cache.get(ddcontrol.getAjaxOptions()));\n                        superMethod.call(ddcontrol);\n                    } else {\n                        $($.ajax(ddcontrol.getAjaxOptions())).throbber({target: ddcontrol.$,\n                            end: function () {\n                                ddcontrol.reset();\n                            }\n                        });\n                        superMethod.call(ddcontrol);\n                        if (ddcontrol.iframeShim) {\n                            ddcontrol.iframeShim.hide();\n                        }\n                    }\n                };\n            }(ddcontrol.show),\n\n            resetCache: function () {\n                ddcontrol.cache.reset();\n            }\n        });\n        ddcontrol.addCallback('refreshSuccess', function () {\n            ddcontrol.reset();\n        });\n    });\n    return dropdowns;\n};\n\n\n// OMG. No. Just no.\n$.fn.dropDown = function (type, options) {\n    type = (type || 'Standard').replace(/^([a-z])/, function (match) {\n        return match.toUpperCase();\n    });\n    return dropDown[type].call(this, options);\n};\n\n$.fn.dropDown = deprecate.construct($.fn.dropDown, 'Dropdown constructor', {\n    alternativeName: 'Dropdown2'\n});\n\nglobalize('dropDown', dropDown);\n\nexport default dropDown;\n"],"sourceRoot":"/source/"}