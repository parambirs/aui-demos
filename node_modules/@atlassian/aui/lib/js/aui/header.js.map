{"version":3,"sources":["js/aui/header.js"],"names":[],"mappings":"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","file":"js/aui/header.js","sourcesContent":["'use strict';\n\nimport $ from './jquery';\nimport * as deprecate from './internal/deprecation';\nimport debounce from './debounce';\nimport globalize from './internal/globalize';\nimport i18n from './i18n';\nimport skate from './internal/skate';\nimport state from './internal/state';\nimport template from 'skatejs-template-html';\n\nvar $window = $(window);\n\nfunction Header (element) {\n    var that = this;\n\n    this.element = element;\n    this.$element = $(element);\n    this.index = $('aui-header, .aui-header').index(element);\n    this.$secondaryNav = this.$element.find('.aui-header-secondary .aui-nav').first();\n    this.menuItems = [];\n    this.totalWidth = 0;\n    this.$moreMenu = undefined;\n    this.rightMostNavItemIndex = undefined;\n    this.$applicationLogo = this.$element.find('#logo');\n    this.moreMenuWidth = 0;\n    this.primaryButtonsWidth = 0;\n\n    // to cache the selector and give .find convenience\n    this.$headerFind = (function () {\n        var $header = $(that.$element[0].querySelector('.aui-header-primary'));\n\n        return function (selector) {\n            return $header.find(selector);\n        };\n    })();\n}\n\nHeader.prototype = {\n    init: function () {\n        var that = this;\n\n        this.element.setAttribute('data-aui-responsive', 'true');\n        this.$headerFind('.aui-button').parent().each(function () {\n            that.primaryButtonsWidth += $(this).outerWidth(true);\n        });\n\n        // remember the widths of all the menu items\n        this.$headerFind('.aui-nav > li > a:not(.aui-button)').each(function () {\n            var $this = $(this).parent();\n            var outerWidth = $this.outerWidth(true);\n\n            that.totalWidth += outerWidth;\n            that.menuItems.push({\n                $element: $this,\n                outerWidth: outerWidth\n            });\n        });\n\n        /** The zero based index of the right-most visible nav menu item. */\n        this.rightMostNavItemIndex = this.menuItems.length - 1;\n\n        $window.on('resize', this._resizeHandler = debounce(function () {\n            that.constructResponsiveDropdown();\n        }, 100));\n\n        // So that the header logo doesn't mess things up. (size is unknown before the image loads)\n        var $logoImg = this.$applicationLogo.find('img');\n\n        if ($logoImg.length !== 0) {\n            $logoImg.attr('data-aui-responsive-header-index', this.index);\n            $logoImg.load(function () {\n                that.constructResponsiveDropdown();\n            });\n        }\n\n        this.constructResponsiveDropdown();\n\n        // show the aui nav (hidden via css on load)\n        this.$headerFind('.aui-nav').css('width', 'auto');\n    },\n\n    destroy: function () {\n        $window.off('resize', this._resizeHandler);\n    },\n\n    // calculate widths based on the current state of the page\n    calculateAvailableWidth: function () {\n        // if there is no secondary nav, use the right of the screen as the boundary instead\n        var rightMostBoundary = this.$secondaryNav.is(':visible') ? this.$secondaryNav.offset().left : this.$element.outerWidth();\n\n        // the right most side of the primary nav, this is assumed to exists if this code is running\n        var primaryNavRight = this.$applicationLogo.offset().left + this.$applicationLogo.outerWidth(true) + this.primaryButtonsWidth;\n\n        return rightMostBoundary - primaryNavRight;\n    },\n\n    showResponsiveDropdown: function () {\n        if (this.$moreMenu === undefined) {\n            this.$moreMenu = this.createResponsiveDropdownTrigger();\n        }\n        this.$moreMenu.css('display', '');\n    },\n\n    hideResponsiveDropdown: function () {\n        if (this.$moreMenu !== undefined) {\n            this.$moreMenu.css('display', 'none');\n        }\n    },\n\n    constructResponsiveDropdown: function () {\n        if (!this.menuItems.length) {\n            return;\n        }\n\n        var remainingWidth;\n        var availableWidth = this.calculateAvailableWidth(this.$element, this.primaryButtonsWidth);\n\n        if (availableWidth > this.totalWidth) {\n            this.showAll();\n        } else {\n            this.showResponsiveDropdown();\n            remainingWidth = availableWidth - this.moreMenuWidth;\n\n            // Figure out how many nav menu items fit into the available space.\n            var newRightMostNavItemIndex = -1;\n            while (remainingWidth - this.menuItems[newRightMostNavItemIndex + 1].outerWidth >= 0) {\n                remainingWidth -= this.menuItems[newRightMostNavItemIndex + 1].outerWidth;\n                newRightMostNavItemIndex++;\n            }\n\n            if (newRightMostNavItemIndex < this.rightMostNavItemIndex) {\n                this.moveToResponsiveDropdown(this.rightMostNavItemIndex - newRightMostNavItemIndex);\n            } else if (this.rightMostNavItemIndex < newRightMostNavItemIndex) {\n                this.moveOutOfResponsiveDropdown(newRightMostNavItemIndex - this.rightMostNavItemIndex);\n            }\n        }\n    },\n\n    // creates the trigger and content elements for the show more dropdown\n    createResponsiveDropdownTrigger: function () {\n        var moreNavItemEl = document.createElement('li');\n        var dropdownEl = document.createElement('aui-dropdown-menu');\n        dropdownEl.id = `aui-responsive-header-dropdown-${this.index}`;\n        skate.init(dropdownEl);\n\n        var dropdownSectionEl = document.createElement('aui-section');\n        dropdownSectionEl.id = `aui-responsive-header-dropdown-list-${this.index}`;\n        skate.init(dropdownSectionEl);\n\n        template.wrap(dropdownEl).appendChild(dropdownSectionEl);\n\n        var triggerEl = createTriggerAndAssociate(dropdownEl);\n        moreNavItemEl.appendChild(triggerEl);\n        moreNavItemEl.appendChild(dropdownEl);\n\n        // Append the More menu before any primary buttons.\n        if (this.primaryButtonsWidth === 0) {\n            this.$headerFind('.aui-nav').append(moreNavItemEl);\n        } else {\n            this.$headerFind('.aui-nav > li > .aui-button:first').parent().before(moreNavItemEl);\n        }\n\n        this.moreMenuWidth = $(moreNavItemEl).outerWidth(true);\n        return $(moreNavItemEl);\n    },\n\n    // function that handles moving items out of the show more menu into the app header\n    moveOutOfResponsiveDropdown: function (numItems) {\n        if (numItems <= 0) {\n            return;\n        }\n\n        var $moreDropdown = $(`#aui-responsive-header-dropdown-${this.index}`);\n\n        // Move items (working top-to-bottom) from the more menu into the nav bar.\n        var leftMostIndexToMove = this.rightMostNavItemIndex + 1;\n        var rightMostIndexToMove = this.rightMostNavItemIndex + numItems;\n        for (var i = leftMostIndexToMove; i <= rightMostIndexToMove; i++) {\n            var $navItem = this.menuItems[i].$element;\n            var $navItemTrigger = $navItem.children('a');\n            var $navItemDropdown = $('#' + $navItemTrigger.attr('aria-controls'));\n\n            if ($navItemTrigger.attr('aria-controls')) {\n                $navItemDropdown.removeClass('aui-dropdown2-sub-menu');\n                $navItem.append($navItemDropdown);\n            }\n\n            $moreDropdown.find('aui-item-link:first').remove();\n            $navItem.insertBefore(this.$moreMenu);\n        }\n\n        this.rightMostNavItemIndex += numItems;\n    },\n\n    // function that handles moving items into the show more menu\n    moveToResponsiveDropdown: function (numItems) {\n        if (numItems <= 0) {\n            return;\n        }\n\n        var moreDropdownSectionEl = template.wrap(this.$moreMenu[0].querySelector('aui-section'));\n\n        // Move items (working right-to-left) from the nav bar to the more menu.\n        var rightMostIndexToMove = this.rightMostNavItemIndex;\n        var leftMostIndexToMove = this.rightMostNavItemIndex - numItems + 1;\n        for (var i = rightMostIndexToMove; i >= leftMostIndexToMove; i--) {\n            var $navItem = this.menuItems[i].$element;\n            var $navItemTrigger = $navItem.children('a');\n            var $navItemDropdown = $('#' + $navItemTrigger.attr('aria-controls'));\n\n            var moreDropdownItemEl = document.createElement('aui-item-link');\n            moreDropdownItemEl.setAttribute('href', $navItemTrigger.attr('href'));\n            if ($navItemTrigger.attr('aria-controls')) {\n                moreDropdownItemEl.setAttribute('for', $navItemTrigger.attr('aria-controls'));\n                $navItemDropdown.addClass('aui-dropdown2-sub-menu');\n                $navItemDropdown.appendTo('body');\n            }\n            skate.init(moreDropdownItemEl);\n            template.wrap(moreDropdownItemEl).textContent = $navItemTrigger.text();\n\n            $navItem.detach();\n            moreDropdownSectionEl.insertBefore(moreDropdownItemEl, moreDropdownSectionEl.firstChild);\n        }\n\n        this.rightMostNavItemIndex -= numItems;\n    },\n\n    // function that handles show everything\n    showAll: function () {\n        this.moveOutOfResponsiveDropdown((this.menuItems.length - 1) - this.rightMostNavItemIndex);\n        this.hideResponsiveDropdown();\n    }\n};\n\nfunction createTriggerAndAssociate(dropdown) {\n    var trigger = document.createElement('a');\n    trigger.setAttribute('class', 'aui-dropdown2-trigger');\n    trigger.setAttribute('href', '#');\n    trigger.id = dropdown.id + '-trigger';\n    trigger.setAttribute('aria-controls', dropdown.id);\n    trigger.innerHTML = AJS.I18n.getText('aui.words.more');\n\n    return trigger;\n}\n\nfunction createHeader (element) {\n    var header = new Header(element);\n    header.init();\n    return header;\n}\n\nfunction findAndCreateHeaders () {\n    $('.aui-header').each(function () {\n        createHeader(this);\n    });\n}\n\n$(findAndCreateHeaders);\n\nvar responsiveheader = {};\nresponsiveheader.setup = deprecate.fn(findAndCreateHeaders, 'responsiveheader.setup', {\n    removeInVersion: '6.0.0',\n    sinceVersion: '5.8.0',\n    extraInfo: 'No need to manually initialise anymore as this is now a web component.'\n});\n\nskate('aui-header', {\n    created: function (element) {\n        $(element).find('.aui-banner').addClass('aui-banner-error');\n    },\n\n    attached: function (element) {\n        state(element).set('instance', createHeader(element));\n    },\n\n    detached: function (element) {\n        state(element).get('instance').destroy();\n    },\n\n    attributes: {\n        link: function (element, data) {\n            element.querySelector('#logo > a').setAttribute('href', data.newValue);\n        },\n\n        responsive: function (element, data) {\n            element.querySelector('.aui-header').setAttribute('data-aui-responsive', data.newValue);\n        }\n    },\n\n    template: template(`\n        <content select=\"aui-banner\"></content>\n        <nav class=\"aui-header aui-dropdown2-trigger-group\" role=\"navigation\">\n            <content select=\".aui-header-before\"></content>\n            <div class=\"aui-header-primary\">\n                <h1 id=\"logo\" class=\"aui-header-logo\">\n                    <a href=\"/\">\n                        <content select=\".aui-header-logo, .aui-header-logo-device, .aui-header-logo-text\"></content>\n                    </a>\n                </h1>\n                <content select=\".aui-header-content\"></content>\n            </div>\n            <content select=\".aui-header-secondary\"></content>\n            <content select=\".aui-header-after\"></content>\n        </nav>\n    `)\n});\n\nglobalize('responsiveheader', responsiveheader);\n\nexport default responsiveheader;\n"],"sourceRoot":"/source/"}