{"version":3,"sources":["js/aui/navigation.js"],"names":[],"mappings":"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","file":"js/aui/navigation.js","sourcesContent":["'use strict';\n\nimport './i18n';\nimport $ from './jquery';\nimport skate from './internal/skate';\nimport globalize from './internal/globalize';\nimport widget from './internal/widget';\n\n/**\n * Navigation (\".aui-nav\" elements).\n *\n * @param {(string|HtmlElement|jQuery)} selector - An expression\n *     representing a single .aui-nav element; you may also pass an expression\n *     for a descendent element, in which case the closest containing\n *     .aui-nav element is used.\n * @constructor\n */\nfunction Navigation (selector) {\n    this.$el = $(selector).closest('.aui-nav');\n\n    // If there are multiple objects, initialise them separately\n    if (this.$el.length > 1) {\n        return this.$el.map(function (idx, elm) {\n            return new Navigation(elm);\n        })[0];\n    }\n\n    // If already initialised, return existing object\n    if (this.$el.data('aui-navigation')) {\n        return this.$el.data('aui-navigation');\n    }\n\n    this.$el.data('aui-navigation', this);\n\n    this.$treeParent = this.$el.parent('li[aria-expanded]');\n    this.$subtreeToggleIcon = this.$treeParent\n        .children('.aui-nav-subtree-toggle')\n        .children('span.aui-icon');\n\n    // Hide extra items under a 'More...' link\n    this.hideMoreItems();\n\n    // Add child-selected class to relevant attributes\n    this.$el.children('li:has(.aui-nav-selected)').addClass('aui-nav-child-selected');\n\n    // Auto-expand if child is selected\n    var $selected = this.$el.children('.aui-nav-selected');\n    $selected\n        .parents('.aui-nav > [aria-expanded=false]')\n        .add($selected.filter('[aria-expanded=false]'))\n        .each(function () {\n            var nav = navigationWidget($(this).children('.aui-nav'));\n            nav.expand();\n        });\n\n    // Toggle expand on click\n    this.$el.find('> li[aria-expanded] > .aui-nav-subtree-toggle').on('click', function () {\n        var nav = navigationWidget($(this).siblings('.aui-nav'));\n        nav.toggle();\n    });\n\n    return this;\n}\n\nNavigation.prototype.isNested = function () {\n    return this.$treeParent.length === 1;\n};\n\nNavigation.prototype.isCollapsed = function () {\n    return this.$treeParent.attr('aria-expanded') === 'false';\n};\n\nNavigation.prototype.expand = function () {\n    this.$treeParent.attr('aria-expanded', 'true');\n    this.$subtreeToggleIcon\n        .removeClass('aui-iconfont-collapsed')\n        .addClass('aui-iconfont-expanded');\n    this.hideMoreItems();\n    return this;\n};\n\nNavigation.prototype.collapse = function () {\n    this.$treeParent.attr('aria-expanded', 'false');\n    this.$subtreeToggleIcon\n        .removeClass('aui-iconfont-expanded')\n        .addClass('aui-iconfont-collapsed');\n    return this;\n};\n\nNavigation.prototype.toggle = function () {\n    if (this.isCollapsed()) {\n        this.expand();\n    } else {\n        this.collapse();\n    }\n    return this;\n};\n\nNavigation.prototype.hideMoreItems = function () {\n    if (this.$el.is('.aui-nav:not([aria-expanded=false]) [data-more]')) {\n        var moreText = this.$el.attr('data-more') || AJS.I18n.getText('aui.words.moreitem');\n        var limit = Math.abs(parseInt(this.$el.attr('data-more-limit'))) || 5;\n        var $listElements = this.$el.children('li');\n\n        // Only add 'More...' if there is more than one element to hide and there are no selected elements\n        var lessThanTwoToHide = $listElements.length <= limit + 1;\n        var selectedElementPresent = $listElements.filter('.aui-nav-selected').length;\n        var alreadyInitialised = $listElements.filter('.aui-nav-more').length;\n        if (lessThanTwoToHide || selectedElementPresent || alreadyInitialised) {\n            return this;\n        }\n\n        $('<li>', {\n            'class': 'aui-nav-more',\n            'aria-hidden': 'true'\n        }).append($('<a>', {\n            'href': '#',\n            'class': 'aui-nav-item',\n            'text': moreText,\n            'click': function (e) {\n                e.preventDefault();\n                $(this).parent().remove();\n            }\n        })).insertAfter($listElements.eq(limit - 1));\n    }\n\n    return this;\n};\n\n\nvar navigationWidget = widget('navigation', Navigation);\n\n// Initialise nav elements\nskate('aui-nav', {\n    type: skate.type.CLASSNAME,\n    attached: function (element) {\n        new Navigation(element);\n    },\n    detached: function (element) {\n        $(element).removeData();\n    }\n});\n\nglobalize('navigation', navigationWidget);\n\nexport default navigationWidget;\n"],"sourceRoot":"/source/"}