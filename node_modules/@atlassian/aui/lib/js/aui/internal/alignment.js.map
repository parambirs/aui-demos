{"version":3,"sources":["js/aui/internal/alignment.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,gBAAY,CAAC;;;;;;;;AAIb,QAAI,cAAc,GAAG,WAAW,CAAC;AACjC,QAAI,qBAAqB,GAAG,kBAAkB,CAAC;AAC/C,QAAI,cAAc,GAAG,qBAAqB,CAAC;AAC3C,QAAI,sBAAsB,GAAG,eAAe,CAAC;AAC7C,QAAI,iBAAiB,GAAG,qBAAqB,CAAC;AAC9C,QAAI,iBAAiB,GAAG,qBAAqB,CAAC;AAC9C,QAAI,kBAAkB,GAAG,cAAc,CAAC;AACxC,QAAI,aAAa,GAAG;AAChB,kBAAU,EAAE,EAAC,EAAE,EAAC,aAAa,EAAE,MAAM,EAAE,UAAU,EAAC;AAClD,oBAAY,EAAE,EAAC,EAAE,EAAE,eAAe,EAAE,MAAM,EAAE,YAAY,EAAC;AACzD,mBAAW,EAAE,EAAC,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,EAAC;AACtD,mBAAW,EAAE,EAAC,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,WAAW,EAAC;AAClD,sBAAc,EAAE,EAAC,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,cAAc,EAAC;AAC3D,sBAAc,EAAE,EAAC,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,cAAc,EAAC;AAC3D,qBAAa,EAAE,EAAC,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,aAAa,EAAC;AACtD,uBAAe,EAAE,EAAC,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE,eAAe,EAAC;AAC5D,sBAAc,EAAE,EAAC,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,cAAc,EAAC;AACzD,kBAAU,EAAE,EAAC,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU,EAAC;AACjD,qBAAa,EAAE,EAAC,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,aAAa,EAAC;AAC1D,qBAAa,EAAE,EAAC,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,aAAa,EAAC;AAC1D,sBAAc,EAAE,EAAC,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,WAAW,EAAC;AACrD,uBAAe,EAAE,EAAC,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU,EAAC;KACzD,CAAC;;AAEF,aAAS,mBAAmB,CAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE;AAC/C,YAAI,SAAS,GAAG,iBAAiB,GAAG,IAAI,CAAC;AACzC,YAAI,SAAS,GAAG,iBAAiB,GAAG,IAAI,CAAC;;AAEzC,eAAO,CAAC,SAAS,IAAI,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,SAAS,CAAC;KAC1D;;AAED,aAAS,YAAY,CAAE,OAAO,EAAE,IAAI,EAAE;AAClC,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC;KACjF;;AAED,aAAS,YAAY,CAAE,OAAO,EAAE,IAAI,EAAE;AAClC,eAAO,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC;KACjF;;AAED,aAAS,YAAY,CAAE,OAAO,EAAE;qBACT,CAAC,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC,IAAI,kBAAkB,CAAA,CAAE,KAAK,CAAC,GAAG,CAAC;;;;YAAtF,IAAI;YAAE,IAAI;;AACf,eAAO;AACH,gBAAI,EAAJ,IAAI;AACJ,gBAAI,EAAJ,IAAI;SACP,CAAC;KACL;;AAED,aAAS,YAAY,CAAE,OAAO,EAAE;AAC5B,YAAI,SAAS,GAAG,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC,IAAI,MAAM,CAAC;;AAEhE,YAAI,OAAO,SAAS,KAAK,QAAQ,EAAE;AAC/B,qBAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;SACjD;;AAED,eAAO,SAAS,CAAC;KACpB;;AAED,aAAS,0BAA0B,CAAE,MAAM,EAAE,SAAS,EAAE;AACpD,YAAI,IAAI,GAAG,MAAM,CAAC;;AAElB,YAAI,CAAC,SAAS,IAAI,SAAS,KAAK,MAAM,IAAI,SAAS,KAAK,QAAQ,EAAE;AAC9D,qBAAS,GAAG,QAAQ,CAAC,eAAe,CAAC;SACxC;;AAED,YAAI,SAAS,IAAI,SAAS,CAAC,QAAQ,IAAI,SAAS,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,EAAE;AAC7E,gBAAI,eAAe,GAAG,SAAS,CAAC,qBAAqB,EAAE,CAAC;AACxD,gBAAI,YAAY,GAAG,MAAM,CAAC,qBAAqB,EAAE,CAAC;;AAElD,gBAAI,YAAY,CAAC,IAAI,GAAG,eAAe,CAAC,KAAK,GAAG,CAAC,EAAE;AAC/C,oBAAI,GAAG,OAAO,CAAC;aAClB;SACJ;;AAED,eAAO,IAAI,CAAC;KACf;;AAED,aAAS,aAAa,CAAE,IAAI,EAAE,IAAI,EAAE;AAChC,eAAO,aAAa,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,aAAa,CAAC,kBAAkB,CAAC,CAAC;KAChF;;AAGD,aAAS,SAAS,CAAE,OAAO,EAAE,MAAM,EAAE;AACjC,YAAI,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;AACtC,YAAI,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;;AAEtC,YAAI,CAAC,SAAS,CAAC,IAAI,IAAI,SAAS,CAAC,IAAI,KAAK,MAAM,EAAE;AAC9C,qBAAS,CAAC,IAAI,GAAG,0BAA0B,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;SAClE;;AAED,YAAI,UAAU,GAAG,aAAa,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;AAC/D,YAAI,mBAAmB,GAAG,YAAY,CAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;AACvE,YAAI,MAAM,GAAG,uBAAW;AACpB,mBAAO,EAAE,KAAK;AACd,mBAAO,EAAE,OAAO;AAChB,kBAAM,EAAE,MAAM;AACd,sBAAU,EAAE,UAAU,CAAC,EAAE;AACzB,4BAAgB,EAAE,UAAU,CAAC,MAAM;AACnC,uBAAW,EAAE,sBAAsB;AACnC,uBAAW,EAAE,CACT;;AAEI,kBAAE,EAAE,AAAC,SAAS,KAAK,MAAM,GAAI,QAAQ,GAAG,SAAS;AACjD,0BAAU,EAAE,mBAAmB,KAAK,IAAI,GAAG,MAAM,GAAG,UAAU;aACjE,CACJ;SACJ,CAAC,CAAC;;AAEH,2BAAmB,CAAC,OAAO,EAAE,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;;AAE7D,YAAI,CAAC,UAAU,GAAG,MAAM,CAAC;KAC5B;;AAED,aAAS,CAAC,SAAS,GAAG;;;;;;AAMlB,eAAO,EAAE,mBAAY;AACjB,gBAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;AAC1B,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,eAAO,EAAE,mBAAY;AACjB,gBAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;AAC1B,mBAAO,IAAI,CAAC;SACf;;;;;;;AAOD,cAAM,EAAE,kBAAY;AAChB,gBAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;AACzB,mBAAO,IAAI,CAAC;SACf;KACJ,CAAC;;qBAEa,SAAS","file":"js/aui/internal/alignment.js","sourcesContent":["'use strict';\n\nimport Tether from 'tether';\n\nvar ATTR_ALIGNMENT = 'alignment';\nvar ATTR_ALIGNMENT_STATIC = 'alignment-static';\nvar ATTR_CONTAINER = 'alignment-container';\nvar CLASS_PREFIX_ALIGNMENT = 'aui-alignment';\nvar CLASS_PREFIX_SIDE = 'aui-alignment-side-';\nvar CLASS_PREFIX_SNAP = 'aui-alignment-snap-';\nvar DEFAULT_ATTACHMENT = 'right middle';\nvar attachmentMap = {\n    'top left': {el:'bottom left', target: 'top left'},\n    'top center': {el: 'bottom center', target: 'top center'},\n    'top right': {el: 'bottom right', target: 'top right'},\n    'right top': {el: 'top left', target: 'top right'},\n    'right middle': {el: 'middle left', target: 'middle right'},\n    'right bottom': {el: 'bottom left', target: 'bottom right'},\n    'bottom left': {el: 'top left', target: 'bottom left'},\n    'bottom center': {el: 'top center', target: 'bottom center'},\n    'bottom right': {el: 'top right', target: 'bottom right'},\n    'left top': {el: 'top right', target: 'top left'},\n    'left middle': {el: 'middle right', target: 'middle left'},\n    'left bottom': {el: 'bottom right', target: 'bottom left'},\n    'submenu left': {el: 'top left', target: 'top right'},\n    'submenu right': {el: 'top right', target: 'top left'}\n};\n\nfunction addAlignmentClasses (element, side, snap) {\n    var sideClass = CLASS_PREFIX_SIDE + side;\n    var snapClass = CLASS_PREFIX_SNAP + snap;\n\n    element.className += ' ' + sideClass + ' ' + snapClass;\n}\n\nfunction getAttribute (element, name) {\n    return element.getAttribute(name) || element.getAttribute('data-aui-' + name);\n}\n\nfunction hasAttribute (element, name) {\n    return element.hasAttribute(name) || element.hasAttribute('data-aui-' + name);\n}\n\nfunction getAlignment (element) {\n    let [side, snap] = (getAttribute(element, ATTR_ALIGNMENT) || DEFAULT_ATTACHMENT).split(' ');\n    return {\n        side,\n        snap\n    };\n}\n\nfunction getContainer (element) {\n    var container = getAttribute(element, ATTR_CONTAINER) || window;\n\n    if (typeof container === 'string') {\n        container = document.querySelector(container);\n    }\n\n    return container;\n}\n\nfunction calculateBestAlignmentSnap (target, container) {\n    var snap = 'left';\n\n    if (!container || container === window || container === document) {\n        container = document.documentElement;\n    }\n\n    if (container && container.nodeType && container.nodeType === Node.ELEMENT_NODE) {\n        let containerBounds = container.getBoundingClientRect();\n        let targetBounds = target.getBoundingClientRect();\n\n        if (targetBounds.left > containerBounds.right / 2) {\n            snap = 'right';\n        }\n    }\n\n    return snap;\n}\n\nfunction getAttachment (side, snap) {\n    return attachmentMap[side + ' ' + snap] || attachmentMap[DEFAULT_ATTACHMENT];\n}\n\n\nfunction Alignment (element, target) {\n    var container = getContainer(element);\n    var alignment = getAlignment(element);\n\n    if (!alignment.snap || alignment.snap === 'auto') {\n        alignment.snap = calculateBestAlignmentSnap(target, container);\n    }\n\n    var attachment = getAttachment(alignment.side, alignment.snap);\n    var isStaticallyAligned = hasAttribute(element, ATTR_ALIGNMENT_STATIC);\n    var tether = new Tether({\n        enabled: false,\n        element: element,\n        target: target,\n        attachment: attachment.el,\n        targetAttachment: attachment.target,\n        classPrefix: CLASS_PREFIX_ALIGNMENT,\n        constraints: [\n            {\n                // Try and keep the element on page\n                to: (container === window) ? 'window' : container,\n                attachment: isStaticallyAligned === true ? 'none' : 'together'\n            }\n        ]\n    });\n\n    addAlignmentClasses(element, alignment.side, alignment.snap);\n\n    this._auiTether = tether;\n}\n\nAlignment.prototype = {\n    /**\n     * Stops aligning and cleans up.\n     *\n     * @returns {Alignment}\n     */\n    destroy: function () {\n        this._auiTether.destroy();\n        return this;\n    },\n\n    /**\n     * Disables alignment.\n     *\n     * @returns {Alignment}\n     */\n    disable: function () {\n        this._auiTether.disable();\n        return this;\n    },\n\n    /**\n     * Enables alignment.\n     *\n     * @returns {Alignment}\n     */\n    enable: function () {\n        this._auiTether.enable();\n        return this;\n    }\n};\n\nexport default Alignment;\n"],"sourceRoot":"/source/"}