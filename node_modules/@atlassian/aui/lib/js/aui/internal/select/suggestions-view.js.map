{"version":3,"sources":["js/aui/internal/select/suggestions-view.js"],"names":[],"mappings":"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","file":"js/aui/internal/select/suggestions-view.js","sourcesContent":["'use strict';\n\nimport $ from '../../jquery';\nimport '../../i18n';\nimport Alignment from '../alignment';\nimport layer from '../../layer';\n\nfunction generateListItemID (listId, index) {\n    return listId + '-' + index;\n}\n\n/**\n *\n * @param view SuggestionsView\n */\nfunction enableAlignment (view) {\n    if (view.anchor && !view.auiAlignment) {\n        view.auiAlignment = new Alignment(view.el, view.anchor);\n    }\n\n    if (view.auiAlignment) {\n        view.auiAlignment.enable();\n    }\n}\n\nfunction destroyAlignment (view) {\n    if (view.auiAlignment) {\n        view.auiAlignment.destroy();\n    }\n}\n\nfunction matchWidth (view) {\n    $(view.el).css('min-width', $(view.anchor).outerWidth());\n}\n\nfunction SuggestionsView (element, anchor) {\n    this.el = element;\n    this.anchor = anchor;\n}\n\nfunction clearActive (element) {\n    $(element).find('.aui-select-active').removeClass('aui-select-active');\n}\n\nSuggestionsView.prototype = {\n    render: function (suggestions, currentLength, listId) {\n        this.currListId = listId;\n        var html = '';\n\n        // Do nothing if we have no new suggestions, otherwise append anything else we find.\n        if (suggestions.length) {\n            var i = currentLength;\n            suggestions.forEach(function (sugg) {\n                var label = sugg.getLabel();\n                var imageSrc = sugg.get('img-src');\n                var image = imageSrc ? `<img src=\"${imageSrc}\"/>` : '';\n                var newValueText = sugg.get('new-value') ? (` (<em>${AJS.I18n.getText('aui.select.new.value')}</em>)`) : '';\n                html += `<li role=\"option\" class=\"aui-select-suggestion\" id=\"${generateListItemID(listId, i)}\">${image}${label}${newValueText}</li>`;\n                i++;\n            });\n\n            // If the old suggestions were empty, a <li> of 'No suggestions' will be appended, we need to remove it\n            if (currentLength) {\n                this.el.querySelector('ul').innerHTML += html;\n            } else {\n                this.el.querySelector('ul').innerHTML = html;\n            }\n        } else if (!currentLength) {\n            this.el.querySelector('ul').innerHTML = `<li role=\"option\" class=\"aui-select-no-suggestions\">${AJS.I18n.getText('aui.select.no.suggestions')}</li>`;\n        }\n\n        return this;\n    },\n    setActive: function (active) {\n        clearActive(this.el);\n        $(this.el).find('#' + generateListItemID(this.currListId, active)).addClass('aui-select-active');\n    },\n    getActive: function () {\n        return this.el.querySelector('.aui-select-active');\n    },\n    show: function () {\n        matchWidth(this);\n        layer(this.el).show();\n        enableAlignment(this);\n    },\n    hide: function () {\n        clearActive(this.el);\n        layer(this.el).hide();\n        destroyAlignment(this);\n    },\n    isVisible: function () {\n        return $(this.el).is(':visible');\n    }\n};\n\nexport default SuggestionsView;\n"],"sourceRoot":"/source/"}