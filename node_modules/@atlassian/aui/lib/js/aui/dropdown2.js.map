{"version":3,"sources":["js/aui/dropdown2.js"],"names":[],"mappings":"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","file":"js/aui/dropdown2.js","sourcesContent":["'use strict';\n\nimport './i18n';\nimport $ from './jquery';\nimport template from 'skatejs-template-html';\nimport * as deprecate from './internal/deprecation';\nimport * as logger from './internal/log';\nimport { debounceImmediate } from './debounce';\nimport { supportsVoiceOver } from './internal/browser';\nimport Alignment from './internal/alignment';\nimport keyCode from './key-code';\nimport layer from './layer';\nimport state from './internal/state';\nimport skate from './internal/skate';\n\nfunction isChecked(el) {\n    return $(el).is('.checked, .aui-dropdown2-checked, [aria-checked=\"true\"]');\n}\n\nfunction getTrigger(control) {\n    return $('[aria-controls=\"' + control.id + '\"]')[0];\n}\n\nfunction doIfTrigger(triggerable, callback) {\n    var trigger = getTrigger(triggerable);\n\n    if (trigger) {\n        callback(trigger);\n    }\n}\n\nfunction setDropdownTriggerActiveState(trigger, isActive) {\n    var $trigger = $(trigger);\n\n    if (isActive) {\n        $trigger.attr('aria-expanded', 'true');\n        $trigger.addClass('active aui-dropdown2-active');\n    } else {\n        $trigger.attr('aria-expanded', 'false');\n        $trigger.removeClass('active aui-dropdown2-active');\n    }\n}\n\n// LOADING STATES\nvar UNLOADED = 'unloaded';\nvar LOADING = 'loading';\nvar ERROR = 'error';\nvar SUCCESS = 'success';\n\n\n// ASYNC DROPDOWN FUNCTIONS\n\nfunction makeAsyncDropdownContents (json) {\n    var dropdownContents = json.map(function makeSection (sectionData) {\n        var sectionItemsHtml = sectionData.items.map(function makeSectionItem (itemData) {\n            function makeBooleanAttribute (attr) {\n                return itemData[attr] ? `${attr} =\"true\"` : '';\n            }\n\n            function makeAttribute (attr) {\n                return itemData[attr] ? `${attr}=\"${itemData[attr]}\"` : '';\n            }\n\n            var tagName = 'aui-item-' + itemData.type;\n            var itemHtml = `\n                <${tagName} ${makeAttribute('for')} ${makeAttribute('href')} ${makeBooleanAttribute('interactive')} ${makeBooleanAttribute('checked')} ${makeBooleanAttribute('disabled')}>\n                    ${itemData.content}\n                </${tagName}>`;\n\n            return itemHtml;\n        }).join('');\n\n        var sectionAttributes = sectionData.label ? `label=\"${sectionData.label}\"` : '';\n        var sectionHtml = `\n            <aui-section ${sectionAttributes}>\n                ${sectionItemsHtml}\n            </aui-section>`;\n\n        return sectionHtml;\n    }).join('\\n');\n\n    return dropdownContents;\n}\n\nfunction setDropdownContents (dropdown, json) {\n    state(dropdown).set('loading-state', SUCCESS);\n    template.wrap(dropdown).innerHTML = makeAsyncDropdownContents(json);\n    skate.init(dropdown);\n}\n\nfunction setDropdownErrorState (dropdown) {\n    state(dropdown).set('loading-state', ERROR);\n    state(dropdown).set('hasErrorBeenShown', dropdown.isVisible());\n    template.wrap(dropdown).innerHTML = `\n        <div class=\"aui-message aui-message-error aui-dropdown-error\">\n            <p>${AJS.I18n.getText('aui.dropdown.async.error')}</p>\n        </div>\n    `;\n}\n\nfunction setDropdownLoadingState (dropdown) {\n    state(dropdown).set('loading-state', LOADING);\n    state(dropdown).set('hasErrorBeenShown', false);\n\n    doIfTrigger(dropdown, function (trigger) {\n        trigger.setAttribute('aria-busy', 'true');\n    });\n\n    template.wrap(dropdown).innerHTML = `\n        <div class=\"aui-dropdown-loading\">\n            <span class=\"spinner\"></span> ${AJS.I18n.getText('aui.dropdown.async.loading')}\n        </div>\n    `;\n    $(dropdown).find('.spinner').spin();\n}\n\nfunction setDropdownLoaded (dropdown) {\n    doIfTrigger(dropdown, function (trigger) {\n        trigger.setAttribute('aria-busy', 'false');\n    });\n}\n\nfunction loadContentsIfAsync (dropdown) {\n    if (!dropdown.src || state(dropdown).get('loading-state') === LOADING) {\n        return;\n    }\n\n    setDropdownLoadingState(dropdown);\n\n    $.ajax(dropdown.src)\n        .done(function (json, status, xhr) {\n            var isValidStatus = xhr.status === 200;\n            if (isValidStatus) {\n                setDropdownContents(dropdown, json);\n            } else {\n                setDropdownErrorState(dropdown);\n            }\n        })\n        .fail(function () {\n            setDropdownErrorState(dropdown);\n        })\n        .always(function () {\n            setDropdownLoaded(dropdown);\n        });\n}\n\nfunction loadContentWhenMouseEnterTrigger(dropdown) {\n    var isDropdownUnloaded = state(dropdown).get('loading-state') === UNLOADED;\n    var hasCurrentErrorBeenShown = state(dropdown).get('hasErrorBeenShown');\n    if (isDropdownUnloaded || hasCurrentErrorBeenShown && !dropdown.isVisible()) {\n        loadContentsIfAsync(dropdown);\n    }\n}\n\nfunction loadContentWhenMenuShown(dropdown) {\n    var isDropdownUnloaded = state(dropdown).get('loading-state') === UNLOADED;\n    var hasCurrentErrorBeenShown = state(dropdown).get('hasErrorBeenShown');\n    if (isDropdownUnloaded || hasCurrentErrorBeenShown) {\n        loadContentsIfAsync(dropdown);\n    }\n    if (state(dropdown).get('loading-state') === ERROR) {\n        state(dropdown).set('hasErrorBeenShown', true);\n    }\n}\n\n\n// The dropdown's trigger\n// ----------------------\n\nfunction triggerCreated (trigger) {\n    var dropdownID = trigger.getAttribute('aria-controls');\n\n    if (!dropdownID) {\n        dropdownID = trigger.getAttribute('aria-owns');\n\n        if (!dropdownID) {\n            logger.error('Dropdown triggers need either a \"aria-owns\" or \"aria-controls\" attribute');\n        } else {\n            trigger.removeAttribute('aria-owns');\n            trigger.setAttribute('aria-controls', dropdownID);\n        }\n    }\n\n    trigger.setAttribute('aria-haspopup', true);\n    trigger.setAttribute('aria-expanded', false);\n    trigger.setAttribute('href', '#');\n\n    function handleIt(e) {\n        e.preventDefault();\n\n        if (!trigger.isEnabled()) {\n            return;\n        }\n\n        var dropdown = document.getElementById(dropdownID);\n        dropdown.toggle();\n        dropdown.isSubmenu = trigger.hasSubmenu();\n\n        return dropdown;\n    }\n\n    function handleMouseEnter(e) {\n        e.preventDefault();\n\n        if (!trigger.isEnabled()) {\n            return;\n        }\n\n        var dropdown = document.getElementById(dropdownID);\n        loadContentWhenMouseEnterTrigger(dropdown);\n\n        if (trigger.hasSubmenu()) {\n            dropdown.show();\n            dropdown.isSubmenu = trigger.hasSubmenu();\n        }\n\n        return dropdown;\n    }\n\n    function handleKeydown(e) {\n        var normalInvoke = (e.keyCode === keyCode.ENTER || e.keyCode === keyCode.SPACE);\n        var submenuInvoke = (e.keyCode === keyCode.RIGHT && trigger.hasSubmenu());\n        var rootMenuInvoke = ((e.keyCode === keyCode.UP || e.keyCode === keyCode.DOWN) && !trigger.hasSubmenu());\n\n        if (normalInvoke || submenuInvoke || rootMenuInvoke) {\n            var dropdown = handleIt(e);\n\n            if (dropdown) {\n                dropdown.focusItem(0);\n            }\n        }\n    }\n\n    $(trigger)\n        .on('aui-button-invoke', handleIt)\n        .on('click', handleIt)\n        .on('keydown', handleKeydown)\n        .on('mouseenter', handleMouseEnter)\n    ;\n}\n\nvar triggerPrototype = {\n    disable: function () {\n        this.setAttribute('aria-disabled', 'true');\n    },\n\n    enable: function () {\n        this.setAttribute('aria-disabled', 'false');\n    },\n\n    isEnabled: function () {\n        return this.getAttribute('aria-disabled') !== 'true';\n    },\n\n    hasSubmenu: function () {\n        var triggerClasses = (this.className || '').split(/\\s+/);\n        return triggerClasses.indexOf('aui-dropdown2-sub-trigger') !== -1;\n    }\n};\n\nskate('aui-dropdown2-trigger', {\n    type: skate.type.CLASSNAME,\n    created: triggerCreated,\n    prototype: triggerPrototype\n});\n\n//To remove at a later date. Some dropdown triggers initialise lazily, so we need to listen for mousedown\n//and synchronously init before the click event is fired.\n//TODO: delete in AUI 6.0.0, see AUI-2868\nfunction bindLazyTriggerInitialisation() {\n    $(document).on('mousedown', '.aui-dropdown2-trigger', function () {\n        var isElementSkated = this.hasAttribute('resolved');\n        if (!isElementSkated) {\n            skate.init(this);\n            var lazyDeprecate = deprecate.getMessageLogger('Dropdown2 lazy initialisation', {\n                removeInVersion: '6.0.0',\n                alternativeName: 'initialisation on DOM insertion',\n                sinceVersion: '5.8.0',\n                extraInfo: 'Dropdown2 triggers should have all necessary attributes on DOM insertion',\n                deprecationType: 'JS'\n            });\n            lazyDeprecate();\n        }\n    });\n}\n\nbindLazyTriggerInitialisation();\n\nskate('aui-dropdown2-sub-trigger', {\n    type: skate.type.CLASSNAME,\n    created: function (trigger) {\n        trigger.className += ' aui-dropdown2-trigger';\n        skate.init(trigger);\n    }\n});\n\n\n// Dropdown trigger groups\n// -----------------------\n\n$(document).on('mouseenter', '.aui-dropdown2-trigger-group a, .aui-dropdown2-trigger-group button', function (e) {\n    const $item = $(e.currentTarget);\n\n    if ($item.is('.aui-dropdown2-active')) {\n        return; // No point doing anything if we're hovering over the already-active item trigger.\n    }\n\n    if ($item.closest('.aui-dropdown2').size()) {\n        return; // We don't want to deal with dropdown items, just the potential triggers in the group.\n    }\n\n    const $triggerGroup = $item.closest('.aui-dropdown2-trigger-group');\n\n    const $groupActiveTrigger = $triggerGroup.find('.aui-dropdown2-active');\n    if ($groupActiveTrigger.size() && $item.is('.aui-dropdown2-trigger')) {\n        $groupActiveTrigger.blur(); // Remove focus from the previously opened menu.\n        $item.trigger('aui-button-invoke'); // Open this trigger's menu.\n        e.preventDefault();\n    }\n\n    const $groupFocusedTrigger = $triggerGroup.find(':focus');\n    if ($groupFocusedTrigger.size() && $item.is('.aui-dropdown2-trigger')) {\n        $groupFocusedTrigger.blur();\n    }\n});\n\n\n// Dropdown items\n// --------------\n\nfunction getDropdownItems (dropdown, filter) {\n    return $(dropdown)\n        .find([\n            // Legacy markup.\n            '> ul > li',\n            '> .aui-dropdown2-section > ul > li',\n            // Accessible markup.\n            '> div[role] > .aui-dropdown2-section > div[role=\"group\"] > ul[role] > li[role]',\n            // Web component.\n            'aui-item-link',\n            'aui-item-checkbox',\n            'aui-item-radio'\n        ].join(', '))\n        .filter(filter)\n        .children('a, button, [role=\"checkbox\"], [role=\"menuitemcheckbox\"], [role=\"radio\"], [role=\"menuitemradio\"]');\n}\n\nfunction getAllDropdownItems (dropdown) {\n    return getDropdownItems(dropdown, function () {\n        return true;\n    });\n}\n\nfunction getVisibleDropdownItems (dropdown) {\n    return getDropdownItems(dropdown, function () {\n        return this.className.indexOf('hidden') === -1;\n    });\n}\n\nfunction amendDropdownItem (item) {\n    var $item = $(item);\n\n    $item.attr('tabindex', '-1');\n\n    /**\n     * Honouring the documentation.\n     * @link https://docs.atlassian.com/aui/latest/docs/dropdown2.html\n     */\n    if ($item.hasClass('aui-dropdown2-disabled') || $item.parent().hasClass('aui-dropdown2-hidden')) {\n        $item.attr('aria-disabled', true);\n    }\n}\n\nfunction amendDropdownContent (dropdown) {\n    // Add assistive semantics to each dropdown item\n    getAllDropdownItems(dropdown).each(function () {\n        amendDropdownItem(this);\n    });\n}\n\n/**\n * Honours behaviour for code written using only the legacy class names.\n * To maintain old behaviour (i.e., remove the 'hidden' class and the item will become un-hidden)\n * whilst allowing our code to only depend on the new classes, we need to\n * keep the state of the DOM in sync with legacy classes.\n *\n * Calling this function will add the new namespaced classes to elements with legacy names.\n * @returns {Function} a function to remove the new namespaced classes, only from the elements they were added to.\n */\nfunction migrateAndSyncLegacyClassNames (dropdown) {\n    var $dropdown = $(dropdown);\n\n    // Migrate away from legacy class names\n    var $hiddens = $dropdown.find('.hidden').addClass('aui-dropdown2-hidden');\n    var $disableds = $dropdown.find('.disabled').addClass('aui-dropdown2-disabled');\n    var $interactives = $dropdown.find('.interactive').addClass('aui-dropdown2-interactive');\n\n    return function revertToOriginalMarkup () {\n        $hiddens.removeClass('aui-dropdown2-hidden');\n        $disableds.removeClass('aui-dropdown2-disabled');\n        $interactives.removeClass('aui-dropdown2-interactive');\n    };\n}\n\n\n// The Dropdown itself\n// -------------------\n\nfunction setLayerAlignment(dropdown, trigger) {\n    var hasSubmenu = trigger && trigger.hasSubmenu && trigger.hasSubmenu();\n    var hasSubmenuAlignment = dropdown.getAttribute('data-aui-alignment') === 'submenu auto';\n\n    if (!hasSubmenu && hasSubmenuAlignment) {\n        restorePreviousAlignment(dropdown);\n    }\n    var hasAnyAlignment = dropdown.hasAttribute('data-aui-alignment');\n\n    if (hasSubmenu && !hasSubmenuAlignment) {\n        saveCurrentAlignment(dropdown);\n        dropdown.setAttribute('data-aui-alignment', 'submenu auto');\n        dropdown.setAttribute('data-aui-alignment-static', true);\n    } else if (!hasAnyAlignment) {\n        dropdown.setAttribute('data-aui-alignment', 'bottom auto');\n        dropdown.setAttribute('data-aui-alignment-static', true);\n    }\n\n    if (dropdown._auiAlignment) {\n        dropdown._auiAlignment.destroy();\n    }\n\n    dropdown._auiAlignment = new Alignment(dropdown, trigger);\n\n    dropdown._auiAlignment.enable();\n}\n\nfunction saveCurrentAlignment(dropdown) {\n     var $dropdown = $(dropdown);\n     if (dropdown.hasAttribute('data-aui-alignment')) {\n         $dropdown.data('previous-data-aui-alignment', dropdown.getAttribute('data-aui-alignment'));\n     }\n     $dropdown.data('had-data-aui-alignment-static', dropdown.hasAttribute('data-aui-alignment-static'));\n }\n\nfunction restorePreviousAlignment(dropdown) {\n     var $dropdown = $(dropdown);\n\n     var previousAlignment = $dropdown.data('previous-data-aui-alignment');\n     if (previousAlignment) {\n         dropdown.setAttribute('data-aui-alignment', previousAlignment);\n     } else {\n         dropdown.removeAttribute('data-aui-alignment');\n     }\n     $dropdown.removeData('previous-data-aui-alignment');\n\n     if (!$dropdown.data('had-data-aui-alignment-static')) {\n         dropdown.removeAttribute('data-aui-alignment-static');\n     }\n     $dropdown.removeData('had-data-aui-alignment-static');\n }\n\nfunction getDropdownHideLocation(dropdown, trigger) {\n    var possibleHome = trigger.getAttribute('data-dropdown2-hide-location');\n    return document.getElementById(possibleHome) || dropdown.parentNode;\n}\n\nvar keyboardClose = false;\nfunction keyboardCloseDetected () {\n    keyboardClose = true;\n}\n\nfunction wasProbablyClosedViaKeyboard () {\n    var result = (keyboardClose === true);\n    keyboardClose = false;\n    return result;\n}\n\nfunction bindDropdownBehaviourToLayer(dropdown) {\n    layer(dropdown);\n\n\n    dropdown.addEventListener('aui-layer-show', function () {\n        $(dropdown).trigger('aui-dropdown2-show');\n\n        dropdown._syncClasses = migrateAndSyncLegacyClassNames(dropdown);\n\n        amendDropdownContent(this);\n\n        doIfTrigger(dropdown, function (trigger) {\n            setDropdownTriggerActiveState(trigger, true);\n            dropdown._returnTo = getDropdownHideLocation(dropdown, trigger);\n        });\n    });\n\n    dropdown.addEventListener('aui-layer-hide', function () {\n        $(dropdown).trigger('aui-dropdown2-hide');\n\n        if (dropdown._syncClasses) {\n            dropdown._syncClasses();\n            delete dropdown._syncClasses;\n        }\n\n        if (dropdown._auiAlignment) {\n            dropdown._auiAlignment.disable();\n            dropdown._auiAlignment.destroy();\n        }\n\n        if (dropdown._returnTo) {\n            if (dropdown.parentNode && dropdown.parentNode !== dropdown._returnTo) {\n                dropdown.parentNode.removeChild(dropdown);\n            }\n            dropdown._returnTo.appendChild(dropdown);\n        }\n\n        getVisibleDropdownItems(dropdown).removeClass('active aui-dropdown2-active');\n\n        doIfTrigger(dropdown, function (trigger) {\n            if (wasProbablyClosedViaKeyboard()) {\n                trigger.focus();\n                setDropdownTriggerActiveState(trigger, trigger.hasSubmenu && trigger.hasSubmenu());\n            } else {\n                setDropdownTriggerActiveState(trigger, false);\n            }\n        });\n\n        // Gets set by submenu trigger invocation. Bad coupling point?\n        delete dropdown.isSubmenu;\n    });\n}\n\nfunction bindItemInteractionBehaviourToDropdown (dropdown) {\n    var $dropdown = $(dropdown);\n\n    $dropdown.on('keydown', function (e) {\n        if (e.keyCode === keyCode.DOWN) {\n            dropdown.focusNext();\n            e.preventDefault();\n        } else if (e.keyCode === keyCode.UP) {\n            dropdown.focusPrevious();\n            e.preventDefault();\n        } else if (e.keyCode === keyCode.LEFT) {\n            if (dropdown.isSubmenu) {\n                keyboardCloseDetected();\n                dropdown.hide();\n                e.preventDefault();\n            }\n        } else if (e.keyCode === keyCode.ESCAPE) {\n            // The closing will be handled by the LayerManager!\n            keyboardCloseDetected();\n        } else if (e.keyCode === keyCode.TAB) {\n            keyboardCloseDetected();\n            dropdown.hide();\n        }\n    });\n\n    // close the menu when clicking on elements which aren't \"interactive\"\n    $dropdown.on('click', 'a, button, [role=\"menuitem\"], [role=\"menuitemcheckbox\"], [role=\"checkbox\"], [role=\"menuitemradio\"], [role=\"radio\"]', function (e) {\n        var $item = $(e.currentTarget);\n\n        if ($item.attr('aria-disabled') === 'true') {\n            e.preventDefault();\n        }\n\n        if (!e.isDefaultPrevented() && !$item.is('.aui-dropdown2-interactive')) {\n            var theMenu = dropdown;\n            do {\n                var dd = layer(theMenu);\n                theMenu = layer(theMenu).below();\n                if (dd.$el.is('.aui-dropdown2')) {\n                    dd.hide();\n                }\n            } while (theMenu);\n        }\n    });\n\n    // close a submenus when the mouse moves over items other than its trigger\n    $dropdown.on('mouseenter', 'a, button, [role=\"menuitem\"], [role=\"menuitemcheckbox\"], [role=\"checkbox\"], [role=\"menuitemradio\"], [role=\"radio\"]', function (e) {\n        var item = e.currentTarget;\n        var hasSubmenu = item.hasSubmenu && item.hasSubmenu();\n\n        if (!e.isDefaultPrevented() && !hasSubmenu) {\n            var maybeALayer = layer(dropdown).above();\n\n            if (maybeALayer) {\n                layer(maybeALayer).hide();\n            }\n        }\n    });\n}\n\n$(window).on('resize', debounceImmediate(function () {\n    $('.aui-dropdown2').each(function (index, dropdown) {\n        if (dropdown.isVisible()){\n            dropdown.hide();\n        }\n    });\n}, 1000));\n\n// Dropdowns\n// ---------\n\nfunction dropdownCreated (dropdown) {\n    var $dropdown = $(dropdown);\n\n    $dropdown.addClass('aui-dropdown2');\n\n    // swap the inner div to presentation as application is only needed for Windows\n    if (supportsVoiceOver()) {\n        $dropdown.find('> div[role=\"application\"]').attr('role', 'presentation');\n    }\n\n    if (dropdown.hasAttribute('data-container')) {\n        $dropdown.attr('data-aui-alignment-container', $dropdown.attr('data-container'));\n        $dropdown.removeAttr('data-container');\n    }\n\n    bindDropdownBehaviourToLayer(dropdown);\n    bindItemInteractionBehaviourToDropdown(dropdown);\n    dropdown.hide();\n\n    $(dropdown).delegate('.aui-dropdown2-checkbox:not(.disabled):not(.aui-dropdown2-disabled)', 'click keydown', function (e) {\n        if (e.type === 'click' || e.keyCode === keyCode.ENTER || e.keyCode === keyCode.SPACE) {\n            let checkbox = this;\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n            if (checkbox.isInteractive()) {\n                e.preventDefault();\n            }\n            if (checkbox.isEnabled()) {\n                // toggle the checked state\n                if (checkbox.isChecked()) {\n                    checkbox.uncheck();\n                } else {\n                    checkbox.check();\n                }\n            }\n        }\n    });\n\n    $(dropdown).delegate('.aui-dropdown2-radio:not(.checked):not(.aui-dropdown2-checked):not(.disabled):not(.aui-dropdown2-disabled)', 'click keydown', function (e) {\n        if (e.type === 'click' || e.keyCode === keyCode.ENTER || e.keyCode === keyCode.SPACE) {\n            let radio = this;\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n            if (radio.isInteractive()) {\n                e.preventDefault();\n            }\n\n            let $radio = $(this);\n            if (this.isEnabled() && this.isChecked() === false) {\n                // toggle the checked state\n                $radio.closest('ul,[role=group]').find('.aui-dropdown2-checked').not(this).each(function () {\n                    this.uncheck();\n                });\n                radio.check();\n            }\n        }\n    });\n}\n\nvar dropdownPrototype = {\n    /**\n     * Toggles the visibility of the dropdown menu\n     */\n    toggle: function () {\n        if (this.isVisible()) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n\n    /**\n     * Explicitly shows the menu\n     *\n     * @returns {HTMLElement}\n     */\n    show: function () {\n        layer(this).show();\n\n        var dropdown = this;\n        doIfTrigger(dropdown, function (trigger) {\n            setLayerAlignment(dropdown, trigger);\n        });\n\n        return this;\n    },\n\n    /**\n     * Explicitly hides the menu\n     *\n     * @returns {HTMLElement}\n     */\n    hide: function () {\n        layer(this).hide();\n        return this;\n    },\n\n    /**\n     * Shifts explicit focus to the next available item in the menu\n     *\n     * @returns {undefined}\n     */\n    focusNext: function () {\n        var $items = getVisibleDropdownItems(this);\n        var selected = document.activeElement;\n        var idx;\n\n        if ($items.last()[0] !== selected) {\n            idx = $items.toArray().indexOf(selected);\n            this.focusItem($items.get(idx + 1));\n        }\n    },\n\n    /**\n     * Shifts explicit focus to the previous available item in the menu\n     *\n     * @returns {undefined}\n     */\n    focusPrevious: function () {\n        var $items = getVisibleDropdownItems(this);\n        var selected = document.activeElement;\n        var idx;\n\n        if ($items.first()[0] !== selected) {\n            idx = $items.toArray().indexOf(selected);\n            this.focusItem($items.get(idx- 1));\n        }\n    },\n\n    /**\n     * Shifts explicit focus to the menu item matching the index param\n     */\n    focusItem: function (item) {\n        var $items = getVisibleDropdownItems(this);\n        var $item;\n        if (typeof item === 'number') {\n            item = $items.get(item);\n        }\n        $item = $(item);\n        $item.focus();\n        $items.removeClass('active aui-dropdown2-active');\n        $item.addClass('active aui-dropdown2-active');\n    },\n\n    /**\n     * Checks whether or not the menu is currently displayed\n     *\n     * @returns {Boolean}\n     */\n    isVisible: function () {\n        return layer(this).isVisible();\n    }\n};\n\n// Web component API for dropdowns\n// -------------------------------\n\nvar disabledAttributeHandler = {\n    created: function (element) {\n        var a = element.children[0];\n        a.setAttribute('aria-disabled', 'true');\n        a.className += ' aui-dropdown2-disabled';\n    },\n    removed: function (element) {\n        var a = element.children[0];\n        a.setAttribute('aria-disabled', 'false');\n        $(a).removeClass('aui-dropdown2-disabled');\n    }\n};\n\nvar interactiveAttributeHandler = {\n    created: function (element) {\n        var a = element.children[0];\n        a.className += ' aui-dropdown2-interactive';\n    },\n    removed: function (element) {\n        var a = element.children[0];\n        $(a).removeClass('aui-dropdown2-interactive');\n    }\n};\n\nvar checkedAttributeHandler = {\n    created: function (element) {\n        var a = element.children[0];\n        $(a).addClass('checked aui-dropdown2-checked');\n        a.setAttribute('aria-checked', true);\n    },\n    removed: function (element) {\n        var a = element.children[0];\n        $(a).removeClass('checked aui-dropdown2-checked');\n        a.setAttribute('aria-checked', false);\n    }\n};\n\nvar hiddenAttributeHandler = {\n    created: function (element) {\n        disabledAttributeHandler.created(element);\n    },\n    removed: function (element) {\n        disabledAttributeHandler.removed(element);\n    }\n};\n\nskate('aui-item-link', {\n    template: template(\n        '<a role=\"menuitem\" tabindex=\"-1\"><content></content></a>'\n    ),\n    attributes: {\n        disabled: disabledAttributeHandler,\n        interactive: interactiveAttributeHandler,\n        hidden: hiddenAttributeHandler,\n        href: {\n            created: function (element, change) {\n                var a = element.children[0];\n                a.setAttribute('href', change.newValue);\n            },\n            updated: function (element, change) {\n                var a = element.children[0];\n                a.setAttribute('href', change.newValue);\n            },\n            removed: function (element) {\n                var a = element.children[0];\n                a.removeAttribute('href');\n            }\n        },\n        'for': {\n            created: function (element) {\n                var anchor = element.children[0];\n                anchor.setAttribute('aria-controls', element.getAttribute('for'));\n                $(anchor).addClass('aui-dropdown2-sub-trigger');\n            },\n            updated: function (element) {\n                var anchor = element.children[0];\n                anchor.setAttribute('aria-controls', element.getAttribute('for'));\n            },\n            removed: function (element) {\n                var anchor = element.children[0];\n                anchor.removeAttribute('aria-controls');\n                $(anchor).removeClass('aui-dropdown2-sub-trigger');\n            }\n        }\n    }\n});\n\nskate('aui-item-checkbox', {\n    template: template(\n        '<span role=\"checkbox\" class=\"aui-dropdown2-checkbox\" tabindex=\"-1\"><content></content></span>'\n    ),\n    attributes: {\n        disabled: disabledAttributeHandler,\n        interactive: interactiveAttributeHandler,\n        checked: checkedAttributeHandler,\n        hidden: hiddenAttributeHandler\n    }\n});\n\nskate('aui-item-radio', {\n    template: template(\n        '<span role=\"radio\" class=\"aui-dropdown2-radio\" tabindex=\"-1\"><content></content></span>'\n    ),\n    attributes: {\n        disabled: disabledAttributeHandler,\n        interactive: interactiveAttributeHandler,\n        checked: checkedAttributeHandler,\n        hidden: hiddenAttributeHandler\n    }\n});\n\nskate('aui-section', {\n    template: template(`\n        <strong aria-role=\"presentation\" class=\"aui-dropdown2-heading\"></strong>\n        <div role=\"group\">\n            <content></content>\n        </div>\n    `),\n    attributes: {\n        label: function (element, data) {\n            var headingElement = element.children[0];\n            var groupElement = element.children[1];\n            headingElement.textContent = data.newValue;\n            groupElement.setAttribute('aria-label', data.newValue);\n        }\n    },\n    created: function (element) {\n        element.className += ' aui-dropdown2-section';\n        element.setAttribute('role', 'presentation');\n    }\n});\n\nskate('aui-dropdown-menu', {\n    template: template(`\n        <div role=\"application\">\n            <content></content>\n        </div>\n    `),\n    created: function (dropdown) {\n        dropdown.setAttribute('role', 'menu');\n        dropdown.className = 'aui-dropdown2 aui-style-default aui-layer';\n        state(dropdown).set('loading-state', UNLOADED);\n        // Now skate the .aui-dropdown2 behaviour.\n        skate.init(dropdown);\n    },\n    attributes: {\n        src: {}\n    },\n    prototype: dropdownPrototype,\n    events: {\n        'aui-layer-show': loadContentWhenMenuShown\n    }\n});\n\n// Legacy dropdown inits\n// ---------------------\n\nskate('aui-dropdown2', {\n    type: skate.type.CLASSNAME,\n    created: dropdownCreated,\n    prototype: dropdownPrototype\n});\n\nskate('data-aui-dropdown2', {\n    type: skate.type.ATTRIBUTE,\n    created: dropdownCreated,\n    prototype: dropdownPrototype\n});\n\n\n// Checkboxes and radios\n// ---------------------\n\nskate('aui-dropdown2-checkbox', {\n    type: skate.type.CLASSNAME,\n\n    created: function (checkbox) {\n        var checked = isChecked(checkbox);\n        if (checked) {\n            $(checkbox).addClass('checked aui-dropdown2-checked');\n        }\n        checkbox.setAttribute('aria-checked', checked);\n        checkbox.setAttribute('tabindex', '0');\n\n        // swap from menuitemcheckbox to just plain checkbox for VoiceOver\n        if (supportsVoiceOver()) {\n            checkbox.setAttribute('role','checkbox');\n        }\n    },\n\n    prototype: {\n        isEnabled: function () {\n            return !(this.getAttribute('aria-disabled') !== null && this.getAttribute('aria-disabled') === 'true');\n        },\n\n        isChecked: function () {\n            return this.getAttribute('aria-checked') !== null && this.getAttribute('aria-checked') === 'true';\n        },\n\n        isInteractive: function () {\n            return $(this).hasClass('aui-dropdown2-interactive');\n        },\n\n        uncheck: function () {\n            if (this.parentNode.tagName.toLowerCase() === 'aui-item-checkbox') {\n                this.parentNode.removeAttribute('checked');\n            }\n            this.setAttribute('aria-checked', 'false');\n            $(this).removeClass('checked aui-dropdown2-checked');\n            $(this).trigger('aui-dropdown2-item-uncheck');\n        },\n\n        check: function () {\n            if (this.parentNode.tagName.toLowerCase() === 'aui-item-checkbox') {\n                this.parentNode.setAttribute('checked', '');\n            }\n            this.setAttribute('aria-checked', 'true');\n            $(this).addClass('checked aui-dropdown2-checked');\n            $(this).trigger('aui-dropdown2-item-check');\n        }\n    }\n});\n\nskate('aui-dropdown2-radio', {\n    type: skate.type.CLASSNAME,\n\n    created: function (radio) {\n        // add a dash of ARIA\n        var checked = isChecked(radio);\n        if (checked) {\n            $(radio).addClass('checked aui-dropdown2-checked');\n        }\n        radio.setAttribute('aria-checked', checked);\n        radio.setAttribute('tabindex', '0');\n\n        // swap from menuitemradio to just plain radio for VoiceOver\n        if (supportsVoiceOver()) {\n            radio.setAttribute('role','radio');\n        }\n    },\n\n    prototype: {\n        isEnabled: function () {\n            return !(this.getAttribute('aria-disabled') !== null && this.getAttribute('aria-disabled') === 'true');\n        },\n\n        isChecked: function () {\n            return this.getAttribute('aria-checked') !== null && this.getAttribute('aria-checked') === 'true';\n        },\n\n        isInteractive: function () {\n            return $(this).hasClass('aui-dropdown2-interactive');\n        },\n\n        uncheck: function () {\n            if (this.parentNode.tagName.toLowerCase() === 'aui-item-radio') {\n                this.parentNode.removeAttribute('checked');\n            }\n            this.setAttribute('aria-checked', 'false');\n            $(this).removeClass('checked aui-dropdown2-checked');\n            $(this).trigger('aui-dropdown2-item-uncheck');\n        },\n\n        check: function () {\n            if (this.parentNode.tagName.toLowerCase() === 'aui-item-radio') {\n                this.parentNode.setAttribute('checked', '');\n            }\n            this.setAttribute('aria-checked', 'true');\n            $(this).addClass('checked aui-dropdown2-checked');\n            $(this).trigger('aui-dropdown2-item-check');\n        }\n    }\n});\n"],"sourceRoot":"/source/"}